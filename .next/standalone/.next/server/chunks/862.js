exports.id=862,exports.ids=[862],exports.modules={85925:(e,a,t)=>{Promise.resolve().then(t.bind(t,39382))},38271:(e,a,t)=>{"use strict";t.d(a,{Z:()=>s});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,t(73098).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},62776:(e,a,t)=>{"use strict";t.d(a,{Z:()=>c});var s=t(95344),l=t(3729),r=t(14513),o=t(56389),i=t(3380),n=t(89410);function c({images:e=[],onChange:a,maxImages:t=5}){let[c,d]=(0,l.useState)(!1),m=(0,l.useRef)(null),p=async s=>{let l=s.target.files?.[0];if(l){if(e.length>=t){alert(`Maximum ${t} images allowed.`);return}d(!0);try{let t=await h(l),s=new FormData;s.append("file",t);let r=await fetch("/api/upload",{method:"POST",body:s}),o=await r.json();o.success?a([...e,o.url]):alert("Upload failed: "+o.error)}catch(e){console.error(e),alert("Upload error")}finally{d(!1),m.current&&(m.current.value="")}}},u=async(t,s)=>{confirm("Delete this image?")&&(a(e.filter((e,a)=>a!==s)),await fetch("/api/upload",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:t})}))},h=e=>new Promise((a,t)=>{let s=new FileReader;s.readAsDataURL(e),s.onload=s=>{let l=document.createElement("img");l.src=s.target?.result,l.onload=()=>{let s=document.createElement("canvas"),r=1920/l.width,o=r<1?1920:l.width,i=r<1?l.height*r:l.height;s.width=o,s.height=i;let n=s.getContext("2d");n?.drawImage(l,0,0,o,i),s.toBlob(e=>{e?a(e):t(Error("Canvas to Blob failed"))},e.type,.8)}},s.onerror=t});return(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex flex-wrap gap-4",children:[e.map((e,a)=>(0,s.jsxs)("div",{className:"relative w-32 h-32 rounded-xl overflow-hidden border border-gray-200 group",children:[s.jsx(n.default,{src:e,alt:`Room ${a+1}`,fill:!0,className:"object-cover"}),s.jsx("button",{type:"button",onClick:()=>u(e,a),className:"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:s.jsx(r.Z,{className:"h-3 w-3"})})]},a)),e.length<t&&(0,s.jsxs)("div",{onClick:()=>m.current?.click(),className:"w-32 h-32 rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors text-gray-400 hover:text-blue-500",children:[c?s.jsx(o.Z,{className:"h-6 w-6 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[s.jsx(i.Z,{className:"h-6 w-6 mb-1"}),s.jsx("span",{className:"text-xs font-bold",children:"Upload"})]}),s.jsx("input",{ref:m,type:"file",accept:"image/*",className:"hidden",onChange:p})]})]}),(0,s.jsxs)("p",{className:"text-xs text-gray-400",children:[e.length," / ",t," images. Optimized automatically."]})]})}},39382:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>c});var s=t(95344),l=t(3729),r=t(8428),o=t(56389),i=t(38271),n=t(62776);function c({initialData:e,mode:a}){let t=(0,r.useRouter)(),[c,d]=(0,l.useState)(!1),[m,p]=(0,l.useState)(!1),[u,h]=(0,l.useState)([]),[x,g]=(0,l.useState)({name:e?.name||"",roomType:e?.roomType||"double",description:e?.description||"",basePrice:e?.basePrice||0,capacity:{adults:e?.capacity?.adults||2,children:e?.capacity?.children||0},amenities:e?.amenities?.join(", ")||"Wifi, TV, AC",images:e?.images?.map(e=>e.url)||[]});(0,l.useEffect)(()=>{fetch("/api/config/room-types").then(e=>e.json()).then(e=>{e.success&&(h(e.types),"create"===a&&e.types.length>0&&g(a=>({...a,roomType:e.types[0].toLowerCase()})))})},[a]);let y=async s=>{s.preventDefault(),d(!0);let l={...x,hotelId:e?.hotelId||"677f50a0058e519c2a66e4a3",amenities:x.amenities.split(",").map(e=>e.trim()).filter(Boolean),images:x.images.map(e=>({url:e,caption:"Room Image"}))},r="create"===a?"/api/rooms":`/api/rooms/${e._id}`;try{let e=await fetch(r,{method:"create"===a?"POST":"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(l)});e.ok?(t.push("/rooms"),t.refresh()):alert("Error saving room: "+await e.text())}catch(e){console.error(e),alert("Something went wrong")}finally{d(!1)}},b=async()=>{if(e?._id&&confirm("Are you sure you want to delete this Room Type? This action cannot be undone.")){p(!0);try{(await fetch(`/api/rooms/${e._id}`,{method:"DELETE"})).ok?(t.push("/rooms"),t.refresh()):alert("Failed to delete room")}catch(e){alert("Error deleting room")}finally{p(!1)}}};return(0,s.jsxs)("form",{onSubmit:y,className:"space-y-6 max-w-4xl mx-auto bg-white p-8 rounded-2xl shadow-sm border border-gray-100",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center border-b pb-4 mb-6",children:[s.jsx("h2",{className:"text-xl font-bold",children:"create"===a?"Add New Room Category":"Edit Room Category"}),"edit"===a&&(0,s.jsxs)("button",{type:"button",onClick:b,disabled:m,className:"text-red-600 hover:bg-red-50 p-2 rounded-lg flex items-center gap-2 text-sm font-bold",children:[m?s.jsx(o.Z,{className:"animate-spin h-4 w-4"}):s.jsx(i.Z,{className:"h-4 w-4"}),"Delete Room Type"]})]}),(0,s.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Category Name"}),s.jsx("input",{required:!0,className:"w-full border rounded-lg px-4 py-2",placeholder:"e.g. Deluxe Sea View",value:x.name,onChange:e=>g({...x,name:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Room Type"}),s.jsx("select",{className:"w-full border rounded-lg px-4 py-2 capitalize",value:x.roomType,onChange:e=>g({...x,roomType:e.target.value}),children:u.length>0?u.map(e=>s.jsx("option",{value:e.toLowerCase(),children:e},e)):(0,s.jsxs)(s.Fragment,{children:[s.jsx("option",{value:"single",children:"Single"}),s.jsx("option",{value:"double",children:"Double"})]})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Base Price (Per Night)"}),s.jsx("input",{type:"number",required:!0,min:"0",className:"w-full border rounded-lg px-4 py-2 font-mono",value:x.basePrice,onChange:e=>g({...x,basePrice:parseInt(e.target.value)})})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Description"}),s.jsx("textarea",{className:"w-full border rounded-lg px-4 py-2 h-24",placeholder:"Describe the room view, decor, etc.",value:x.description,onChange:e=>g({...x,description:e.target.value})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Adult Capacity"}),s.jsx("input",{type:"number",min:"1",className:"w-full border rounded-lg px-4 py-2",value:x.capacity.adults,onChange:e=>g({...x,capacity:{...x.capacity,adults:parseInt(e.target.value)}})})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Children Capacity"}),s.jsx("input",{type:"number",min:"0",className:"w-full border rounded-lg px-4 py-2",value:x.capacity.children,onChange:e=>g({...x,capacity:{...x.capacity,children:parseInt(e.target.value)}})})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Amenities (Comma Separated)"}),s.jsx("input",{className:"w-full border rounded-lg px-4 py-2",placeholder:"Wifi, AC, Geyser, Balcony",value:x.amenities,onChange:e=>g({...x,amenities:e.target.value})})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-bold text-gray-700 mb-1",children:"Images"}),s.jsx(n.Z,{images:x.images,onChange:e=>g({...x,images:e}),maxImages:5})]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-3 pt-6 border-t mt-6",children:[s.jsx("button",{type:"button",onClick:()=>t.back(),className:"px-6 py-2 rounded-lg font-bold text-gray-600 hover:bg-gray-100",children:"Cancel"}),(0,s.jsxs)("button",{type:"submit",disabled:c,className:"px-6 py-2 rounded-lg font-bold bg-blue-600 text-white hover:bg-blue-700 flex items-center gap-2",children:[c&&s.jsx(o.Z,{className:"h-4 w-4 animate-spin"}),"create"===a?"Create Room Type":"Update Room Type"]})]})]})}},91503:(e,a,t)=>{"use strict";t.d(a,{ZP:()=>o});let s=(0,t(86843).createProxy)(String.raw`C:\Users\ismai\.gemini\antigravity\playground\primal-supernova\src\components\RoomTypeForm.tsx`),{__esModule:l,$$typeof:r}=s,o=s.default}};