(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4277],{93806:function(e,t,r){Promise.resolve().then(r.bind(r,56622))},70843:function(e,t,r){"use strict";r.d(t,{Z:function(){return i}});var l=r(2265),s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let r=(0,l.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:n=2,absoluteStrokeWidth:c,className:o="",children:d,...u},x)=>(0,l.createElement)("svg",{ref:x,...s,width:i,height:i,stroke:r,strokeWidth:c?24*Number(n)/Number(i):n,className:["lucide",`lucide-${a(e)}`,o].join(" "),...u},[...t.map(([e,t])=>(0,l.createElement)(e,t)),...Array.isArray(d)?d:[d]]));return r.displayName=`${e}`,r}},97307:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},80037:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},23416:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]])},48219:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]])},79580:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},10822:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]])},3665:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]])},92270:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]])},70655:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,r(70843).Z)("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]])},56622:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return f}});var l=r(57437),s=r(2265),a=r(70094),i=r(79580),n=r(3665),c=r(80037),o=r(23416),d=r(10822),u=r(48219),x=r(97307),m=r(70655),h=r(92270),g=r(50489),p=r(18009);function f(){let[e,t]=(0,s.useState)([]),[r,f]=(0,s.useState)([]),[y,b]=(0,s.useState)(!0),[v,j]=(0,s.useState)(!1),[w,N]=(0,s.useState)(null),[k,C]=(0,s.useState)(null),[Z,A]=(0,s.useState)({hotelId:"",code:"",title:"",description:"",discountType:"percentage",discountValue:10,minBookingAmount:0,maxDiscountAmount:0,validFrom:new Date().toISOString().split("T")[0],validUntil:new Date(Date.now()+2592e6).toISOString().split("T")[0],usageLimit:0,isActive:!0,isPublic:!1});(0,s.useEffect)(()=>{S()},[]),(0,s.useEffect)(()=>{r.length>0&&(T(),Z.hotelId||A(e=>({...e,hotelId:r[0]._id})))},[r]);let S=async()=>{try{let e=await fetch("/api/hotels"),t=await e.json();f(t.hotels||[])}catch(e){p.Am.error("Failed to load hotels")}},T=async()=>{try{b(!0);let e=await fetch("/api/vendor/offers"),r=await e.json();t(r.offers||[])}catch(e){p.Am.error("Failed to load offers")}finally{b(!1)}},O=async e=>{if(e.preventDefault(),!Z.hotelId){p.Am.error("Please select a hotel");return}try{let e=await fetch("/api/vendor/offers",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)}),t=await e.json();if(!e.ok)throw Error(t.error||"Operation failed");p.Am.success("Offer created!"),I(),T()}catch(e){p.Am.error(e.message||"Something went wrong")}},z=async e=>{if(confirm("Are you sure you want to delete this offer?"))try{p.Am.success("Offer deleted"),T()}catch(e){p.Am.error("Failed to delete offer")}},D=async e=>{p.Am.success(e.isActive?"Offer deactivated":"Offer activated")},I=()=>{var e;j(!1),N(null),A({hotelId:(null===(e=r[0])||void 0===e?void 0:e._id)||"",code:"",title:"",description:"",discountType:"percentage",discountValue:10,minBookingAmount:0,maxDiscountAmount:0,validFrom:new Date().toISOString().split("T")[0],validUntil:new Date(Date.now()+2592e6).toISOString().split("T")[0],usageLimit:0,isActive:!0,isPublic:!1})},_=e=>{navigator.clipboard.writeText(e),C(e),setTimeout(()=>C(null),2e3)},M=e=>new Date(e)<new Date;return(0,l.jsxs)("div",{className:"p-8 max-w-6xl mx-auto",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"My Offers"}),(0,l.jsx)("p",{className:"text-gray-500",children:"Create special discounts for your guests"})]}),(0,l.jsxs)("button",{onClick:()=>j(!0),className:"flex items-center gap-2 bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 font-medium",children:[(0,l.jsx)(a.Z,{size:20})," Create Offer"]})]}),y?(0,l.jsx)("div",{className:"flex justify-center p-12",children:(0,l.jsx)(i.Z,{className:"animate-spin text-gray-400"})}):0===e.length?(0,l.jsxs)("div",{className:"text-center py-20 bg-gray-50 rounded-xl",children:[(0,l.jsx)(n.Z,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),(0,l.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"No offers yet"}),(0,l.jsx)("p",{className:"text-gray-500 mb-6",children:"Create your first coupon to attract more guests"}),(0,l.jsx)("button",{onClick:()=>j(!0),className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700",children:"Create Offer"})]}):(0,l.jsx)("div",{className:"grid gap-4",children:e.map(e=>{var t;return(0,l.jsxs)("div",{className:"bg-white border rounded-xl p-6 flex items-center gap-6 ".concat(!e.isActive||M(e.validUntil)?"opacity-60":""),children:[(0,l.jsxs)("button",{onClick:()=>_(e.code),className:"bg-gradient-to-r from-purple-500 to-blue-500 text-white px-4 py-3 rounded-lg font-mono font-bold flex items-center gap-2",children:[e.code,k===e.code?(0,l.jsx)(c.Z,{size:16}):(0,l.jsx)(o.Z,{size:16})]}),(0,l.jsxs)("div",{className:"flex-grow",children:[(0,l.jsx)("h3",{className:"font-bold text-gray-900",children:e.title}),(0,l.jsx)("p",{className:"text-gray-500 text-sm",children:null===(t=e.hotelId)||void 0===t?void 0:t.name}),(0,l.jsxs)("div",{className:"flex gap-4 mt-1 text-sm",children:[(0,l.jsxs)("span",{className:"flex items-center gap-1 text-purple-600",children:["percentage"===e.discountType?(0,l.jsx)(d.Z,{size:14}):(0,l.jsx)(u.Z,{size:14}),"percentage"===e.discountType?"".concat(e.discountValue,"% off"):"৳".concat(e.discountValue," off")]}),(0,l.jsxs)("span",{className:"flex items-center gap-1 text-gray-500",children:[(0,l.jsx)(x.Z,{size:14}),"Until ",new Date(e.validUntil).toLocaleDateString()]})]})]}),(0,l.jsx)("div",{className:"flex gap-2",children:M(e.validUntil)?(0,l.jsx)("span",{className:"px-3 py-1 bg-red-100 text-red-700 rounded-full text-xs font-bold",children:"Expired"}):e.isActive?(0,l.jsx)("span",{className:"px-3 py-1 bg-green-100 text-green-700 rounded-full text-xs font-bold",children:"Active"}):(0,l.jsx)("span",{className:"px-3 py-1 bg-gray-100 text-gray-600 rounded-full text-xs font-bold",children:"Inactive"})}),(0,l.jsxs)("div",{className:"flex gap-2",children:[(0,l.jsx)("button",{onClick:()=>D(e),className:"p-2 rounded-lg ".concat(e.isActive?"text-green-600":"text-gray-400"),children:e.isActive?(0,l.jsx)(m.Z,{size:20}):(0,l.jsx)(h.Z,{size:20})}),(0,l.jsx)("button",{onClick:()=>z(e._id),className:"p-2 hover:bg-red-50 rounded-lg text-red-500",children:(0,l.jsx)(g.Z,{size:18})})]})]},e._id)})}),v&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"bg-gray-900 border border-gray-700 rounded-xl max-w-md w-full p-6 text-white shadow-2xl max-h-[90vh] overflow-y-auto",children:[(0,l.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Create New Offer"}),(0,l.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Hotel *"}),(0,l.jsx)("select",{required:!0,className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white",value:Z.hotelId,onChange:e=>A({...Z,hotelId:e.target.value}),children:r.map(e=>(0,l.jsx)("option",{value:e._id,children:e.name},e._id))})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Coupon Code *"}),(0,l.jsx)("input",{required:!0,className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white uppercase font-mono",value:Z.code,onChange:e=>A({...Z,code:e.target.value.toUpperCase()}),placeholder:"SUMMER25"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Title *"}),(0,l.jsx)("input",{required:!0,className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white",value:Z.title,onChange:e=>A({...Z,title:e.target.value}),placeholder:"Summer Sale"})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Discount Type"}),(0,l.jsxs)("select",{className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white",value:Z.discountType,onChange:e=>A({...Z,discountType:e.target.value}),children:[(0,l.jsx)("option",{value:"percentage",children:"Percentage (%)"}),(0,l.jsx)("option",{value:"fixed",children:"Fixed (৳)"})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Value *"}),(0,l.jsx)("input",{required:!0,type:"number",min:"1",className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white",value:Z.discountValue,onChange:e=>A({...Z,discountValue:parseInt(e.target.value)||0})})]})]}),(0,l.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Valid From"}),(0,l.jsx)("input",{type:"date",className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white",value:Z.validFrom,onChange:e=>A({...Z,validFrom:e.target.value})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-1 text-gray-300",children:"Valid Until *"}),(0,l.jsx)("input",{required:!0,type:"date",className:"w-full bg-gray-800 border border-gray-600 rounded-lg p-2 text-white",value:Z.validUntil,onChange:e=>A({...Z,validUntil:e.target.value})})]})]}),(0,l.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,l.jsx)("button",{type:"button",onClick:I,className:"flex-1 px-4 py-2 border border-gray-600 rounded-lg hover:bg-gray-800 text-gray-300",children:"Cancel"}),(0,l.jsx)("button",{type:"submit",className:"flex-1 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 font-medium",children:"Create Offer"})]})]})]})})]})}}},function(e){e.O(0,[1342,2971,8069,1744],function(){return e(e.s=93806)}),_N_E=e.O()}]);