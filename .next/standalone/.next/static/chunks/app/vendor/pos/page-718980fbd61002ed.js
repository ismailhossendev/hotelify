(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9927],{8153:function(e,t,s){Promise.resolve().then(s.bind(s,98583))},70843:function(e,t,s){"use strict";s.d(t,{Z:function(){return i}});var r=s(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let s=(0,r.forwardRef)(({color:s="currentColor",size:i=24,strokeWidth:l=2,absoluteStrokeWidth:c,className:d="",children:o,...u},h)=>(0,r.createElement)("svg",{ref:h,...a,width:i,height:i,stroke:s,strokeWidth:c?24*Number(l)/Number(i):l,className:["lucide",`lucide-${n(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,r.createElement)(e,t)),...Array.isArray(o)?o:[o]]));return s.displayName=`${e}`,s}},79580:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(70843).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},27271:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(70843).Z)("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]])},70094:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(70843).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},82800:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(70843).Z)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]])},50489:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(70843).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},98583:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return o}});var r=s(57437),a=s(2265),n=s(82800),i=s(27271),l=s(70094),c=s(50489),d=s(79580);function o(){let[e,t]=(0,a.useState)([]),[s,o]=(0,a.useState)([]),[u,h]=(0,a.useState)(!0);(0,a.useEffect)(()=>{fetch("/api/pos/items").then(e=>e.json()).then(e=>{e.success&&t(e.items),h(!1)})},[]);let x=e=>{o(t=>t.find(t=>t._id===e._id)?t.map(t=>t._id===e._id?{...t,qty:t.qty+1}:t):[...t,{...e,qty:1}])},m=(e,t)=>{o(s=>s.map(s=>{if(s._id===e){let e=s.qty+t;return e>0?{...s,qty:e}:s}return s}))},f=e=>{o(t=>t.filter(t=>t._id!==e))},y=s.reduce((e,t)=>e+t.price*t.qty,0),p=async()=>{if(confirm("Confirm order total: BDT ".concat(y,"?"))){h(!0);try{let e=await fetch("/api/pos/orders",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:s,paymentMethod:"cash",guestDetails:{name:"Walk-in Customer"}})}),t=await e.json();t.success?(alert("Order created successfully!"),o([])):alert("Failed: "+t.error)}catch(e){alert("Error creating order")}finally{h(!1)}}};return(0,r.jsxs)("div",{className:"flex h-[calc(100vh-theme(spacing.24))] gap-6",children:[(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto pr-2",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"Point of Sale"}),u?(0,r.jsx)("div",{children:"Loading..."}):(0,r.jsx)("div",{className:"grid grid-cols-3 gap-4",children:e.map(e=>(0,r.jsxs)("div",{onClick:()=>x(e),className:"bg-white p-4 rounded-xl border shadow-sm cursor-pointer hover:border-blue-500 transition-all active:scale-95",children:[(0,r.jsx)("div",{className:"h-24 bg-gray-100 rounded-lg mb-3"}),(0,r.jsx)("h3",{className:"font-semibold text-gray-900",children:e.name}),(0,r.jsxs)("p",{className:"text-blue-600 font-bold mt-1",children:["BDT ",e.price]})]},e._id))})]}),(0,r.jsxs)("div",{className:"w-96 bg-white rounded-xl shadow-lg border flex flex-col",children:[(0,r.jsx)("div",{className:"p-4 border-b bg-gray-50 rounded-t-xl",children:(0,r.jsxs)("h2",{className:"font-bold text-lg flex items-center gap-2",children:[(0,r.jsx)(n.Z,{className:"h-5 w-5"})," Current Order"]})}),(0,r.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:0===s.length?(0,r.jsx)("div",{className:"text-center text-gray-400 py-10",children:"Empty Cart"}):s.map(e=>(0,r.jsxs)("div",{className:"flex justify-between items-center group",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"font-medium",children:e.name}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["BDT ",e.price," x ",e.qty]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"flex items-center border rounded-lg bg-gray-50",children:[(0,r.jsx)("button",{onClick:()=>m(e._id,-1),className:"p-1 hover:bg-gray-200 rounded-l-lg",children:(0,r.jsx)(i.Z,{className:"h-3 w-3"})}),(0,r.jsx)("span",{className:"w-6 text-center text-sm font-medium",children:e.qty}),(0,r.jsx)("button",{onClick:()=>m(e._id,1),className:"p-1 hover:bg-gray-200 rounded-r-lg",children:(0,r.jsx)(l.Z,{className:"h-3 w-3"})})]}),(0,r.jsx)("button",{onClick:()=>f(e._id),className:"text-gray-400 hover:text-red-500",children:(0,r.jsx)(c.Z,{className:"h-4 w-4"})})]})]},e._id))}),(0,r.jsxs)("div",{className:"p-4 border-t bg-gray-50 rounded-b-xl space-y-4",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold",children:[(0,r.jsx)("span",{children:"Total (est. tax +5%)"}),(0,r.jsxs)("span",{children:["BDT ",(1.05*y).toFixed(2)]})]}),(0,r.jsx)("button",{onClick:p,disabled:0===s.length||u,className:"w-full bg-blue-600 text-white py-3 rounded-xl font-bold hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex justify-center",children:u?(0,r.jsx)(d.Z,{className:"animate-spin"}):"Proceed to Payment"})]})]})]})}}},function(e){e.O(0,[2971,8069,1744],function(){return e(e.s=8153)}),_N_E=e.O()}]);