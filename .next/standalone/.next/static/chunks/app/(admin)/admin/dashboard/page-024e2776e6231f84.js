(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9871],{44875:function(e,s,l){Promise.resolve().then(l.bind(l,12049))},12049:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return b}});var a=l(57437),t=l(2265),r=l(79580),n=l(83149),i=l(34059),d=l(29733),o=l(48219),c=l(30438),x=l(26587),h=l(71362),g=l(38333),m=l(23356),u=l(22983),v=l(10166),j=l(98061);function b(){var e,s,l;let[b,N]=(0,t.useState)([]),[y,w]=(0,t.useState)(null),[k,S]=(0,t.useState)(!0);return((0,t.useEffect)(()=>{fetch("/api/admin/stats").then(e=>e.json()).then(e=>{e.success&&w(e.stats)}),fetch("/api/admin/activity").then(e=>e.json()).then(e=>{e.success&&N(e.logs),S(!1)}).catch(()=>S(!1))},[]),k)?(0,a.jsx)("div",{className:"p-8",children:(0,a.jsx)(r.Z,{className:"animate-spin text-purple-500"})}):(0,a.jsxs)("div",{className:"space-y-8",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Admin Dashboard"}),(0,a.jsx)("p",{className:"text-gray-400 mt-1",children:"Platform overview and management"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,a.jsx)(f,{title:"Total Hotels",value:(null==y?void 0:y.totalHotels)||0,icon:n.Z,color:"bg-blue-600"}),(0,a.jsx)(f,{title:"Total Users",value:(null==y?void 0:y.totalUsers)||0,icon:i.Z,color:"bg-green-600"}),(0,a.jsx)(f,{title:"Total Revenue",value:"BDT ".concat((null==y?void 0:null===(e=y.totalRevenue)||void 0===e?void 0:e.toLocaleString())||0),icon:d.Z,color:"bg-purple-600"}),(0,a.jsx)(f,{title:"Pending Withdrawals",value:(null==y?void 0:y.pendingWithdrawals)||0,icon:o.Z,color:"bg-orange-600",alert:(null==y?void 0:y.pendingWithdrawals)>0})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2 space-y-8",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-6",children:"Revenue Overview (Last 30 Days)"}),(0,a.jsx)("div",{className:"h-80 w-full",children:(0,a.jsx)(x.h,{width:"100%",height:"100%",children:(0,a.jsxs)(h.w,{data:(null==y?void 0:y.revenueGraph)||[],children:[(0,a.jsx)(g.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"date",stroke:"#9CA3AF",tickFormatter:e=>{let s=new Date(e);return"".concat(s.getDate(),"/").concat(s.getMonth()+1)}}),(0,a.jsx)(u.B,{stroke:"#9CA3AF"}),(0,a.jsx)(v.u,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",color:"#fff"},labelStyle:{color:"#9CA3AF"}}),(0,a.jsx)(j.x,{type:"monotone",dataKey:"amount",stroke:"#8B5CF6",strokeWidth:2,dot:{fill:"#8B5CF6"}})]})})})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Recent Activity"}),0===b.length?(0,a.jsx)("p",{className:"text-gray-400",children:"No recent activity."}):(0,a.jsx)("div",{className:"space-y-4",children:b.slice(0,5).map(e=>{var s,l,t;return(0,a.jsxs)("div",{className:"flex items-start gap-4 p-3 rounded-lg hover:bg-gray-750 border border-transparent hover:border-gray-700 transition-colors",children:[(0,a.jsxs)("div",{className:"mt-1",children:["login"===e.action&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-green-500"}),"failed_login"===e.action&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-red-500"}),"settings_change"===e.action&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-yellow-500"}),!["login","failed_login","settings_change"].includes(e.action)&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-blue-500"})]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-300",children:[(0,a.jsx)("span",{className:"font-semibold text-white",children:(null===(l=e.userId)||void 0===l?void 0:null===(s=l.profile)||void 0===s?void 0:s.name)||(null===(t=e.userId)||void 0===t?void 0:t.email)||"Unknown User"})," ",e.description||e.action]}),(0,a.jsxs)("div",{className:"flex items-center gap-2 mt-1",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:new Date(e.createdAt).toLocaleString()}),e.hotelId&&(0,a.jsx)("span",{className:"text-xs px-1.5 py-0.5 rounded bg-gray-700 text-gray-400",children:e.hotelId.name})]})]})]},e._id)})})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-xl font-bold",children:"SMS Monitor"}),(0,a.jsx)(c.Z,{className:"h-5 w-5 text-gray-400"})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-750 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Sent Today"}),(0,a.jsx)("span",{className:"font-mono font-bold text-xl",children:(null==y?void 0:null===(s=y.sms)||void 0===s?void 0:s.count)||0})]}),(0,a.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-750 rounded-lg",children:[(0,a.jsx)("span",{className:"text-gray-400",children:"Est. Cost"}),(0,a.jsxs)("span",{className:"font-mono font-bold text-xl text-orange-400",children:["à§³",(null==y?void 0:null===(l=y.sms)||void 0===l?void 0:l.cost)||0]})]}),(0,a.jsx)("button",{className:"w-full py-2 bg-gray-700 hover:bg-gray-600 rounded-lg text-sm font-medium transition-colors",children:"View Logs"})]})]}),(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700",children:[(0,a.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)(p,{label:"View Hotels",href:"/admin/hotels"}),(0,a.jsx)(p,{label:"Manage Users",href:"/admin/users"}),(0,a.jsx)(p,{label:"View Transactions",href:"/admin/transactions"}),(0,a.jsx)(p,{label:"View Withdrawals",href:"/admin/withdrawals"}),(0,a.jsx)(p,{label:"System Settings",href:"/admin/settings"})]})]})]})]})]})}function f(e){let{title:s,value:l,icon:t,color:r,alert:n}=e;return(0,a.jsxs)("div",{className:"bg-gray-800 rounded-xl p-6 border border-gray-700 relative overflow-hidden",children:[n&&(0,a.jsx)("div",{className:"absolute top-0 right-0 p-2",children:(0,a.jsx)("span",{className:"animate-pulse w-3 h-3 bg-red-500 rounded-full block"})}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("div",{className:"p-3 rounded-lg ".concat(r),children:(0,a.jsx)(t,{className:"h-6 w-6 text-white"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-gray-400",children:s}),(0,a.jsx)("p",{className:"text-2xl font-bold",children:l})]})]})]})}function p(e){let{label:s,href:l}=e;return(0,a.jsx)("a",{href:l,className:"block w-full bg-gray-700 hover:bg-gray-600 p-3 rounded-lg text-center font-medium transition-colors border border-gray-600 hover:border-gray-500 text-sm",children:s})}}},function(e){e.O(0,[6195,2971,8069,1744],function(){return e(e.s=44875)}),_N_E=e.O()}]);