(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9566],{65768:function(e,t,r){Promise.resolve().then(r.bind(r,98414))},70843:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(2265),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),o=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:o=24,strokeWidth:l=2,absoluteStrokeWidth:i,className:d="",children:c,...u},m)=>(0,s.createElement)("svg",{ref:m,...a,width:o,height:o,stroke:r,strokeWidth:i?24*Number(l)/Number(o):l,className:["lucide",`lucide-${n(e)}`,d].join(" "),...u},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},79580:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(70843).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},8792:function(e,t,r){"use strict";r.d(t,{default:function(){return a.a}});var s=r(25250),a=r.n(s)},47907:function(e,t,r){"use strict";var s=r(15313);r.o(s,"notFound")&&r.d(t,{notFound:function(){return s.notFound}}),r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},98414:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var s=r(57437),a=r(2265),n=r(47907),o=r(8792),l=r(79580);function i(){let e=(0,n.useRouter)(),[t,r]=(0,a.useState)("guest"),[i,d]=(0,a.useState)("register"),[c,u]=(0,a.useState)(null),[m,x]=(0,a.useState)(!1),[h,p]=(0,a.useState)(!1),[f,g]=(0,a.useState)({name:"",email:"",phone:"",password:""}),[b,y]=(0,a.useState)(""),[j,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(""),k=async r=>{r.preventDefault(),v(!0),N("");try{let r=await fetch("/api/auth/register",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({...f,role:t})}),s=await r.json();if(!r.ok)throw Error(s.error||"Registration failed");s.requiresVerification?(u(s.userId),x(s.canSkipVerification),d("otp")):(p(!0),setTimeout(()=>{e.push("vendor_admin"===t?"/vendor/dashboard":"/")},2e3))}catch(e){N(e.message)}finally{v(!1)}},C=async r=>{r.preventDefault(),v(!0),N("");try{let r=await fetch("/api/auth/verify-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c,code:b})}),s=await r.json();if(!r.ok)throw Error(s.error||"Verification failed");p(!0),setTimeout(()=>{e.push("vendor_admin"===t?"/vendor/dashboard":"/"),e.refresh()},2e3)}catch(e){N(e.message)}finally{v(!1)}},S=async()=>{v(!0);try{let t=await fetch("/api/auth/skip-otp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:c})}),r=await t.json();if(!t.ok)throw Error(r.error||"Skip failed");e.push("/"),e.refresh()}catch(e){N(e.message)}finally{v(!1)}};return h?(0,s.jsx)(e=>{let{message:t}=e;return(0,s.jsxs)("div",{className:"space-y-6 text-center py-12 animate-in fade-in zoom-in duration-500",children:[(0,s.jsx)("div",{className:"mx-auto w-24 h-24 bg-green-500 rounded-full flex items-center justify-center shadow-lg animate-bounce",children:(0,s.jsx)("svg",{className:"w-12 h-12 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,s.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"3",d:"M5 13l4 4L19 7"})})}),(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold text-gray-800",children:"Success!"}),(0,s.jsx)("p",{className:"text-gray-500 text-lg",children:t}),(0,s.jsx)("p",{className:"text-sm text-gray-400 animate-pulse",children:"Redirecting you to dashboard..."})]})]})},{message:"otp"===i?"Your account has been verified.":"Your account has been created."}):"otp"===i?(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 font-sans",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("h2",{className:"mt-6 text-3xl font-bold tracking-tight text-gray-900",children:"Verify Account"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Enter the security code sent to your email"})]}),(0,s.jsx)("div",{className:"bg-white py-8 px-4 shadow-xl shadow-gray-200/50 border border-gray-100 sm:rounded-2xl sm:px-10",children:(0,s.jsxs)("form",{onSubmit:C,className:"space-y-6",children:[w&&(0,s.jsx)("div",{className:"rounded-lg bg-red-50 p-4 border border-red-100 text-sm text-red-700",children:w}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"otp",className:"sr-only",children:"OTP Code"}),(0,s.jsx)("div",{className:"flex justify-center",children:(0,s.jsx)("input",{id:"otp",name:"otp",type:"text",className:"block w-full text-center text-3xl tracking-[0.5em] py-4 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all placeholder-gray-300",maxLength:6,placeholder:"000000",value:b,onChange:e=>y(e.target.value)})})]}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("button",{type:"submit",disabled:j||b.length<6,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-xl shadow-sm text-sm font-bold text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:j?(0,s.jsx)(l.Z,{className:"h-5 w-5 animate-spin"}):"Verify Identity"}),m&&(0,s.jsx)("button",{type:"button",onClick:S,disabled:j,className:"w-full flex justify-center py-2 text-sm font-medium text-gray-500 hover:text-gray-900 transition-colors",children:"Skip for now"})]})]})})]})}):(0,s.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8 font-sans",children:(0,s.jsxs)("div",{className:"max-w-md w-full space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"mx-auto h-12 w-12 relative mb-4",children:(0,s.jsx)("img",{src:"/logo.png",alt:"Hotelify",className:"w-full h-full object-contain"})}),(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-gray-900",children:"Create Account"}),(0,s.jsx)("p",{className:"mt-2 text-sm text-gray-600",children:"Join millions of users using our platform"})]}),(0,s.jsxs)("div",{className:"bg-white py-8 px-4 shadow-xl shadow-gray-200/50 border border-gray-100 sm:rounded-2xl sm:px-10",children:[(0,s.jsx)("div",{className:"flex justify-center mb-8",children:(0,s.jsxs)("nav",{className:"flex space-x-2 bg-gray-100 p-1 rounded-xl","aria-label":"Tabs",children:[(0,s.jsx)("button",{onClick:()=>r("guest"),className:"px-4 py-2 text-sm font-medium rounded-lg transition-all ".concat("guest"===t?"bg-white text-blue-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Customer"}),(0,s.jsx)("button",{onClick:()=>r("vendor_admin"),className:"px-4 py-2 text-sm font-medium rounded-lg transition-all ".concat("vendor_admin"===t?"bg-white text-purple-600 shadow-sm":"text-gray-500 hover:text-gray-700"),children:"Business"})]})}),(0,s.jsxs)("form",{className:"space-y-6",onSubmit:k,children:[w&&(0,s.jsx)("div",{className:"rounded-lg bg-red-50 p-4 border border-red-100 text-sm text-red-700",children:w}),(0,s.jsxs)("div",{className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 pb-1",children:"Full Name"}),(0,s.jsx)("input",{id:"name",name:"name",type:"text",required:!0,className:"appearance-none block w-full px-3 py-2.5 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm transition-all",placeholder:"John Doe",value:f.name,onChange:e=>g({...f,name:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 pb-1",children:"Email Address"}),(0,s.jsx)("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,className:"appearance-none block w-full px-3 py-2.5 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm transition-all",placeholder:"name@example.com",value:f.email,onChange:e=>g({...f,email:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 pb-1",children:"Phone Number"}),(0,s.jsx)("input",{id:"phone",name:"phone",type:"tel",autoComplete:"tel",required:!0,className:"appearance-none block w-full px-3 py-2.5 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm transition-all",placeholder:"+88017...",value:f.phone,onChange:e=>g({...f,phone:e.target.value})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 pb-1",children:"Password"}),(0,s.jsx)("input",{id:"password",name:"password",type:"password",autoComplete:"new-password",required:!0,className:"appearance-none block w-full px-3 py-2.5 border border-gray-300 rounded-xl placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent sm:text-sm transition-all",placeholder:"••••••••",value:f.password,onChange:e=>g({...f,password:e.target.value})})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("button",{type:"submit",disabled:j,className:"w-full flex justify-center py-2.5 px-4 border border-transparent rounded-xl shadow-sm text-sm font-bold text-white focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-all ".concat("vendor_admin"===t?"bg-purple-600 hover:bg-purple-700 focus:ring-purple-500":"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500"),children:j?(0,s.jsx)(l.Z,{className:"h-5 w-5 animate-spin"}):"Create Account"}),"vendor_admin"===t&&(0,s.jsx)("p",{className:"text-xs text-center text-gray-500 mt-4",children:"* Business verification required for vendor accounts"})]})]}),(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,s.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,s.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,s.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"Already have an account?"})})]}),(0,s.jsx)("div",{className:"mt-6",children:(0,s.jsx)(o.default,{href:"/login",className:"w-full flex justify-center py-2.5 px-4 border border-gray-300 rounded-xl shadow-sm bg-white text-sm font-bold text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-all",children:"Login"})})]})]})]})})}}},function(e){e.O(0,[5250,2971,8069,1744],function(){return e(e.s=65768)}),_N_E=e.O()}]);