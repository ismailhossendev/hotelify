(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[624],{8593:function(e,r,s){Promise.resolve().then(s.bind(s,27458))},70843:function(e,r,s){"use strict";s.d(r,{Z:function(){return l}});var a=s(2265),t={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let o=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),l=(e,r)=>{let s=(0,a.forwardRef)(({color:s="currentColor",size:l=24,strokeWidth:n=2,absoluteStrokeWidth:i,className:d="",children:c,...u},m)=>(0,a.createElement)("svg",{ref:m,...t,width:l,height:l,stroke:s,strokeWidth:i?24*Number(n)/Number(l):n,className:["lucide",`lucide-${o(e)}`,d].join(" "),...u},[...r.map(([e,r])=>(0,a.createElement)(e,r)),...Array.isArray(c)?c:[c]]));return s.displayName=`${e}`,s}},97336:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]])},79580:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},62457:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},70699:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},77326:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},50489:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]])},11213:function(e,r,s){"use strict";s.d(r,{Z:function(){return a}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,s(70843).Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},47907:function(e,r,s){"use strict";var a=s(15313);s.o(a,"notFound")&&s.d(r,{notFound:function(){return a.notFound}}),s.o(a,"useParams")&&s.d(r,{useParams:function(){return a.useParams}}),s.o(a,"useRouter")&&s.d(r,{useRouter:function(){return a.useRouter}}),s.o(a,"useSearchParams")&&s.d(r,{useSearchParams:function(){return a.useSearchParams}})},27458:function(e,r,s){"use strict";s.r(r),s.d(r,{default:function(){return p}});var a=s(57437),t=s(2265),o=s(79580),l=s(97336),n=s(50489),i=s(11213),d=s(62457),c=s(77326),u=s(70699),m=s(56288),h=s(47907);function p(){var e,r;let s=(0,h.useRouter)(),[p,f]=(0,t.useState)("general"),[x,b]=(0,t.useState)(!0),[y,g]=(0,t.useState)(!1),[w,v]=(0,t.useState)({name:"",email:"",phone:"",address:"",avatar:"",role:""}),[j,N]=(0,t.useState)({currentPassword:"",newPassword:"",confirmPassword:""});(0,t.useEffect)(()=>{(async()=>{try{let t=await fetch("/api/user/profile");if(t.ok){var e,r,a;let s=await t.json();v({name:(null===(e=s.user.profile)||void 0===e?void 0:e.name)||s.user.name||"",email:s.user.email||"",phone:s.user.phone||"",address:(null===(r=s.user.profile)||void 0===r?void 0:r.address)||"",avatar:(null===(a=s.user.profile)||void 0===a?void 0:a.avatar)||"",role:s.user.role||"User"})}else s.push("/login")}catch(e){console.error("Failed to fetch profile",e)}finally{b(!1)}})()},[s]);let P=async e=>{e.preventDefault(),g(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:w.name,email:w.email,phone:w.phone,address:w.address})}),r=await e.json();if(!e.ok)throw Error(r.error);m.toast.success("Profile updated successfully"),s.refresh()}catch(e){m.toast.error(e.message)}finally{g(!1)}},k=async e=>{if(e.preventDefault(),j.newPassword!==j.confirmPassword){m.toast.error("New passwords do not match");return}g(!0);try{let e=await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentPassword:j.currentPassword,newPassword:j.newPassword})}),r=await e.json();if(!e.ok)throw Error(r.error);m.toast.success("Password updated successfully"),N({currentPassword:"",newPassword:"",confirmPassword:""})}catch(e){m.toast.error(e.message)}finally{g(!1)}},C=async e=>{var r;let s=null===(r=e.target.files)||void 0===r?void 0:r[0];if(!s)return;let a=new FormData;a.append("file",s),b(!0);try{let e=await fetch("/api/upload",{method:"POST",body:a}),r=await e.json();if(!e.ok)throw Error(r.error||"Upload failed");if(!(await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:r.url})})).ok)throw Error("Failed to update profile image");v(e=>({...e,avatar:r.url})),m.toast.success("Profile photo updated")}catch(e){m.toast.error(e.message)}finally{b(!1)}},Z=async()=>{if(confirm("Are you sure you want to remove your profile photo?")){b(!0);try{if(!(await fetch("/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({avatar:""})})).ok)throw Error("Failed to remove profile photo");v(e=>({...e,avatar:""})),m.toast.success("Profile photo removed")}catch(e){m.toast.error(e.message)}finally{b(!1)}}};return x?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsx)(o.Z,{className:"h-8 w-8 animate-spin text-blue-600"})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-6 lg:p-12 font-sans text-gray-900",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto space-y-8 animate-in fade-in slide-in-from-bottom-4 duration-500",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row gap-8",children:[(0,a.jsxs)("div",{className:"w-full md:w-80 flex-shrink-0 space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-6 shadow-sm border border-gray-100 flex flex-col items-center text-center",children:[(0,a.jsxs)("div",{className:"relative group mb-4",children:[(0,a.jsx)("div",{className:"w-28 h-28 rounded-full bg-gradient-to-br from-blue-50 to-blue-100 flex items-center justify-center text-blue-600 font-bold text-3xl overflow-hidden border-4 border-white shadow-md",children:w.avatar?(0,a.jsx)("img",{src:w.avatar,alt:"Profile",className:"w-full h-full object-cover"}):null===(r=w.name)||void 0===r?void 0:null===(e=r[0])||void 0===e?void 0:e.toUpperCase()}),(0,a.jsxs)("label",{className:"absolute bottom-0 right-0 p-2 rounded-full bg-blue-600 text-white cursor-pointer hover:bg-blue-700 transition-colors shadow-sm",children:[(0,a.jsx)(l.Z,{className:"h-4 w-4"}),(0,a.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:C})]})]}),(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:w.name}),(0,a.jsx)("p",{className:"text-sm text-gray-500 mb-4",children:w.email}),(0,a.jsx)("span",{className:"px-3 py-1 rounded-full bg-blue-50 text-blue-700 text-xs font-bold uppercase tracking-wide border border-blue-100",children:w.role.replace("_"," ")}),w.avatar&&(0,a.jsxs)("button",{onClick:Z,className:"mt-4 text-xs text-red-500 hover:text-red-700 flex items-center gap-1 opacity-60 hover:opacity-100 transition-opacity",children:[(0,a.jsx)(n.Z,{className:"h-3 w-3"}),"Remove Photo"]})]}),(0,a.jsx)("nav",{className:"bg-white rounded-2xl overflow-hidden shadow-sm border border-gray-100",children:[{id:"general",label:"General Information",icon:i.Z},{id:"address",label:"Address Details",icon:d.Z},{id:"security",label:"Security & Password",icon:c.Z}].map(e=>(0,a.jsxs)("button",{onClick:()=>f(e.id),className:"w-full flex items-center gap-3 px-6 py-4 text-sm font-medium transition-colors border-l-4 ".concat(p===e.id?"bg-blue-50 text-blue-700 border-blue-600":"text-gray-600 hover:bg-gray-50 border-transparent"),children:[(0,a.jsx)(e.icon,{className:"h-5 w-5 ".concat(p===e.id?"text-blue-600":"text-gray-400")}),e.label]},e.id))})]}),(0,a.jsxs)("div",{className:"flex-1",children:["general"===p&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 animate-in fade-in slide-in-from-right-4",children:[(0,a.jsxs)("div",{className:"mb-8 pb-6 border-b border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"General Information"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Update your personal details and contact info."})]}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6 max-w-2xl",children:[(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Full Name"}),(0,a.jsx)("input",{type:"text",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all",value:w.name,onChange:e=>v({...w,name:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Phone Number"}),(0,a.jsx)("input",{type:"tel",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all",value:w.phone,onChange:e=>v({...w,phone:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2 md:col-span-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Email Address"}),(0,a.jsx)("input",{type:"email",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-blue-500 focus:ring-4 focus:ring-blue-500/10 outline-none transition-all",value:w.email,onChange:e=>v({...w,email:e.target.value})})]})]}),(0,a.jsx)("div",{className:"pt-6 flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:y,className:"px-6 py-2.5 bg-blue-600 text-white font-bold rounded-xl hover:bg-blue-700 transition-colors flex items-center gap-2 shadow-lg shadow-blue-600/20",children:[y&&(0,a.jsx)(o.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Save Changes"]})})]})]}),"address"===p&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 animate-in fade-in slide-in-from-right-4",children:[(0,a.jsxs)("div",{className:"mb-8 pb-6 border-b border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Address Details"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Manage your shipping and billing locations."})]}),(0,a.jsxs)("form",{onSubmit:P,className:"space-y-6 max-w-2xl",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Full Address"}),(0,a.jsx)("textarea",{rows:4,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-purple-500 focus:ring-4 focus:ring-purple-500/10 outline-none transition-all resize-none",placeholder:"Enter your full address (Street, City, Zip, Country)",value:w.address,onChange:e=>v({...w,address:e.target.value})})]}),(0,a.jsx)("div",{className:"pt-6 flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:y,className:"px-6 py-2.5 bg-purple-600 text-white font-bold rounded-xl hover:bg-purple-700 transition-colors flex items-center gap-2 shadow-lg shadow-purple-600/20",children:[y&&(0,a.jsx)(o.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(u.Z,{className:"h-4 w-4"}),"Update Address"]})})]})]}),"security"===p&&(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 shadow-sm border border-gray-100 animate-in fade-in slide-in-from-right-4",children:[(0,a.jsxs)("div",{className:"mb-8 pb-6 border-b border-gray-100",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Security Settings"}),(0,a.jsx)("p",{className:"text-gray-500 mt-1",children:"Ensure your account stays safe and secure."})]}),(0,a.jsxs)("form",{onSubmit:k,className:"space-y-6 max-w-2xl",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Current Password"}),(0,a.jsx)("input",{type:"password",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-red-500 focus:ring-4 focus:ring-red-500/10 outline-none transition-all",placeholder:"Enter current password",value:j.currentPassword,onChange:e=>N({...j,currentPassword:e.target.value})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"New Password"}),(0,a.jsx)("input",{type:"password",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-red-500 focus:ring-4 focus:ring-red-500/10 outline-none transition-all",placeholder:"Enter new password",value:j.newPassword,onChange:e=>N({...j,newPassword:e.target.value})})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("label",{className:"text-sm font-bold text-gray-700",children:"Confirm Password"}),(0,a.jsx)("input",{type:"password",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:bg-white focus:border-red-500 focus:ring-4 focus:ring-red-500/10 outline-none transition-all",placeholder:"Confirm new password",value:j.confirmPassword,onChange:e=>N({...j,confirmPassword:e.target.value})})]})]}),(0,a.jsx)("div",{className:"pt-6 flex justify-end",children:(0,a.jsxs)("button",{type:"submit",disabled:y,className:"px-6 py-2.5 bg-red-600 text-white font-bold rounded-xl hover:bg-red-700 transition-colors flex items-center gap-2 shadow-lg shadow-red-600/20",children:[y&&(0,a.jsx)(o.Z,{className:"h-4 w-4 animate-spin"}),(0,a.jsx)(c.Z,{className:"h-4 w-4"}),"Update Password"]})})]})]})]})]})})})}}},function(e){e.O(0,[6288,2971,8069,1744],function(){return e(e.s=8593)}),_N_E=e.O()}]);