(()=>{var e={};e.id=457,e.ids=[457,6511],e.modules={11185:e=>{"use strict";e.exports=require("mongoose")},47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},14300:e=>{"use strict";e.exports=require("buffer")},6113:e=>{"use strict";e.exports=require("crypto")},12781:e=>{"use strict";e.exports=require("stream")},73837:e=>{"use strict";e.exports=require("util")},25593:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>c,routeModule:()=>m,tree:()=>d});var s=r(50482),a=r(69108),n=r(62563),i=r.n(n),o=r(68300),l={};for(let e in o)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>o[e]);r.d(t,l);let d=["",{children:["vendor",{children:["bookings",{children:["[id]",{children:["invoice",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,91529)),"C:\\Users\\ismai\\.gemini\\antigravity\\playground\\primal-supernova\\src\\app\\vendor\\bookings\\[id]\\invoice\\page.tsx"]}]},{}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,91228)),"C:\\Users\\ismai\\.gemini\\antigravity\\playground\\primal-supernova\\src\\app\\vendor\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,21342)),"C:\\Users\\ismai\\.gemini\\antigravity\\playground\\primal-supernova\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Users\\ismai\\.gemini\\antigravity\\playground\\primal-supernova\\src\\app\\vendor\\bookings\\[id]\\invoice\\page.tsx"],p="/vendor/bookings/[id]/invoice/page",u={require:r,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/vendor/bookings/[id]/invoice/page",pathname:"/vendor/bookings/[id]/invoice",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},35303:()=>{},73098:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(3729),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:d="",children:c,...p},u)=>(0,s.createElement)("svg",{ref:u,...a,width:i,height:i,stroke:r,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide",`lucide-${n(e)}`,d].join(" "),...p},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},99365:(e,t,r)=>{"use strict";r.d(t,{Z:()=>i});var s=r(40002),a={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),i=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:i=24,strokeWidth:o=2,absoluteStrokeWidth:l,className:d="",children:c,...p},u)=>(0,s.createElement)("svg",{ref:u,...a,width:i,height:i,stroke:r,strokeWidth:l?24*Number(o)/Number(i):o,className:["lucide",`lucide-${n(e)}`,d].join(" "),...p},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...Array.isArray(c)?c:[c]]));return r.displayName=`${e}`,r}},68631:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(99365).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},66506:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(99365).Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},78953:(e,t,r)=>{"use strict";r.d(t,{Z:()=>s});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,r(99365).Z)("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]])},16274:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(48026),a=r.n(s)},48026:(e,t,r)=>{"use strict";let{createProxy:s}=r(86843);e.exports=s("C:\\Users\\ismai\\.gemini\\antigravity\\playground\\primal-supernova\\node_modules\\next\\dist\\client\\link.js")},91529:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>p});var s=r(25036),a=r(867),n=r(56511),i=r(98633),o=r(99365);/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let l=(0,o.Z)("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),d=(0,o.Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);async function c(e){await (0,n.default)();let t=await i.$.findById(e).populate("hotelId");return t?JSON.parse(JSON.stringify(t)):null}async function p({params:e}){let t=await c(e.id);t||(0,a.notFound)();let r=t.hotelId||{name:"Hotel Name",contact:{address:{}}},n=t.guestDetails||{},i=t.pricing?.subtotal||0,o=t.pricing?.taxes||0,p=t.grandTotal||i,u=t.amountPaid||0,m=p-u;return(0,s.jsxs)("div",{className:"min-h-screen bg-gray-100 p-8 font-sans print:bg-white print:p-0",children:[(0,s.jsxs)("div",{className:"max-w-3xl mx-auto bg-white shadow-lg rounded-xl overflow-hidden print:shadow-none",children:[(0,s.jsxs)("div",{className:"bg-gray-900 text-white p-4 flex justify-between items-center print:hidden",children:[(0,s.jsxs)("h1",{className:"font-bold",children:["Invoice #",t.bookingNumber]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsxs)("button",{className:"bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold",children:[s.jsx(l,{className:"h-4 w-4"})," Print"]}),(0,s.jsxs)("button",{className:"bg-gray-700 hover:bg-gray-600 px-4 py-2 rounded-lg flex items-center gap-2 text-sm font-bold",children:[s.jsx(d,{className:"h-4 w-4"})," PDF"]})]})]}),(0,s.jsxs)("div",{className:"p-10",id:"invoice-content",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start border-b border-gray-100 pb-8 mb-8",children:[(0,s.jsxs)("div",{children:[s.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:r.name}),(0,s.jsxs)("div",{className:"text-gray-500 text-sm space-y-1",children:[s.jsx("p",{children:r.contact?.address?.area}),(0,s.jsxs)("p",{children:[r.contact?.address?.city,", Bangladesh"]}),(0,s.jsxs)("p",{children:["Phone: ",r.contact?.phone]}),(0,s.jsxs)("p",{children:["Email: ",r.contact?.email]})]})]}),(0,s.jsxs)("div",{className:"text-right",children:[s.jsx("h3",{className:"text-xl font-bold text-blue-600 uppercase tracking-wide mb-2",children:"Invoice"}),(0,s.jsxs)("div",{className:"text-gray-500 text-sm space-y-1",children:[(0,s.jsxs)("p",{children:["Date: ",s.jsx("span",{className:"font-semibold text-gray-900",children:new Date(t.createdAt).toLocaleDateString()})]}),(0,s.jsxs)("p",{children:["Invoice #: ",(0,s.jsxs)("span",{className:"font-semibold text-gray-900",children:["INV-",t.bookingNumber?.replace("BK-","")]})]}),(0,s.jsxs)("p",{children:["Booking ID: ",s.jsx("span",{className:"font-semibold text-gray-900",children:t.bookingNumber})]})]})]})]}),(0,s.jsxs)("div",{className:"mb-8 p-6 bg-gray-50 rounded-lg border border-gray-100",children:[s.jsx("h4",{className:"text-xs font-bold text-gray-400 uppercase mb-2",children:"Bill To:"}),s.jsx("div",{className:"text-gray-900 font-bold text-lg",children:n.name}),s.jsx("div",{className:"text-gray-600",children:n.phone}),s.jsx("div",{className:"text-gray-600",children:n.email})]}),(0,s.jsxs)("table",{className:"w-full mb-8",children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{className:"border-b-2 border-gray-200",children:[s.jsx("th",{className:"text-left py-3 font-bold text-gray-600",children:"Description"}),s.jsx("th",{className:"text-center py-3 font-bold text-gray-600",children:"Nights/Qty"}),s.jsx("th",{className:"text-right py-3 font-bold text-gray-600",children:"Rate"}),s.jsx("th",{className:"text-right py-3 font-bold text-gray-600",children:"Amount"})]})}),(0,s.jsxs)("tbody",{className:"text-gray-700",children:[(0,s.jsxs)("tr",{className:"border-b border-gray-100",children:[(0,s.jsxs)("td",{className:"py-4",children:[s.jsx("div",{className:"font-bold",children:"Room Charge"}),(0,s.jsxs)("div",{className:"text-xs text-gray-400 text-sm",children:["Check-in: ",new Date(t.checkIn).toLocaleDateString(),s.jsx("br",{}),"Check-out: ",new Date(t.checkOut).toLocaleDateString()]})]}),(0,s.jsxs)("td",{className:"text-center py-4",children:[t.nights," Night(s)"]}),(0,s.jsxs)("td",{className:"text-right py-4",children:["৳",t.pricing?.roomCharges?.[0]?.price||"N/A"]}),(0,s.jsxs)("td",{className:"text-right py-4 font-semibold",children:["৳",i]})]}),t.posCharges?.map((e,t)=>s.jsxs("tr",{className:"border-b border-gray-100",children:[s.jsx("td",{className:"py-4",children:e.description||"Restaurant/POS Charge"}),s.jsx("td",{className:"text-center py-4",children:"1"}),s.jsxs("td",{className:"text-right py-4",children:["৳",e.amount]}),s.jsxs("td",{className:"text-right py-4 font-semibold",children:["৳",e.amount]})]},t))]})]}),s.jsx("div",{className:"flex justify-end mb-8",children:(0,s.jsxs)("div",{className:"w-64 space-y-3",children:[(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Subtotal:"}),(0,s.jsxs)("span",{children:["৳",i]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Tax (0%):"}),(0,s.jsxs)("span",{children:["৳",o]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Discount:"}),(0,s.jsxs)("span",{children:["- ৳",t.pricing?.discount||0]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-2xl font-bold text-blue-900 pt-4 border-t border-gray-200",children:[s.jsx("span",{children:"Total:"}),(0,s.jsxs)("span",{children:["৳",p]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-gray-600 pt-2",children:[s.jsx("span",{children:"Paid:"}),(0,s.jsxs)("span",{className:"font-semibold text-green-600",children:["৳",u]})]}),(0,s.jsxs)("div",{className:"flex justify-between text-gray-600",children:[s.jsx("span",{children:"Due:"}),(0,s.jsxs)("span",{className:`font-semibold ${m>0?"text-red-600":"text-gray-900"}`,children:["৳",m]})]})]})}),(0,s.jsxs)("div",{className:"text-center text-gray-400 text-sm pt-8 border-t border-gray-100",children:[s.jsx("p",{className:"mb-1",children:"Thank you for staying with us!"}),(0,s.jsxs)("p",{children:[r.name," - ",r.contact?.phone]})]})]})]}),s.jsx("script",{dangerouslySetInnerHTML:{__html:`
                    const printBtn = document.querySelector('button:first-child');
                    if(printBtn) printBtn.addEventListener('click', () => window.print());
                `}})]})}},56511:(e,t,r)=>{"use strict";r.d(t,{default:()=>o});var s=r(11185),a=r.n(s);let n=process.env.MONGODB_URI;if(!n)throw Error("Please define the MONGODB_URI environment variable inside .env.local");let i=global.mongoose;i||(i=global.mongoose={conn:null,promise:null});let o=async function(){if(i.conn)return i.conn;i.promise||(i.promise=a().connect(n,{bufferCommands:!1}).then(e=>e));try{i.conn=await i.promise}catch(e){throw i.promise=null,e}return i.conn}},98633:(e,t,r)=>{"use strict";r.d(t,{$:()=>i});var s=r(11185),a=r.n(s);let n=new(a()).Schema({hotelId:{type:a().Schema.Types.ObjectId,ref:"Hotel",required:!0,index:!0},roomId:{type:a().Schema.Types.ObjectId,ref:"Room",required:!0},roomUnitId:{type:a().Schema.Types.ObjectId,ref:"RoomUnit"},guestId:{type:a().Schema.Types.ObjectId,ref:"User"},bookingNumber:{type:String,unique:!0},bookingType:{type:String,enum:["online","offline","walk_in"],required:!0},parentBookingId:{type:a().Schema.Types.ObjectId,ref:"Booking"},isMerged:{type:Boolean,default:!1},guestDetails:{name:{type:String,required:!0},email:String,phone:{type:String,required:!0},nid:String,address:String,nationality:{type:String,default:"Bangladeshi"},documents:[{type:String,url:String}]},checkIn:{type:Date,required:!0},checkOut:{type:Date,required:!0},nights:{type:Number,required:!0},guests:{adults:{type:Number,default:1},children:{type:Number,default:0}},additionalGuests:[{name:{type:String,required:!0},age:Number,nid:String}],pricing:{roomCharges:[{date:Date,price:Number}],subtotal:{type:Number,required:!0},taxes:{type:Number,default:0},extraBedCharges:{type:Number,default:0},discount:{type:Number,default:0},discountReason:String,coupon:{offerId:{type:a().Schema.Types.ObjectId,ref:"Offer"},code:String,discountAmount:{type:Number,default:0}},totalAmount:{type:Number,required:!0}},posCharges:[{orderId:{type:a().Schema.Types.ObjectId,ref:"POSOrder"},amount:Number,description:String,createdAt:{type:Date,default:Date.now}}],grandTotal:{type:Number},paymentStatus:{type:String,enum:["pending","partial","paid","refunded"],default:"pending"},payments:[{method:{type:String,enum:["cash","bkash","nagad","card","bank"]},amount:Number,transactionId:String,paidAt:Date,receivedBy:{type:a().Schema.Types.ObjectId,ref:"User"}}],amountPaid:{type:Number,default:0},amountDue:{type:Number},status:{type:String,enum:["pending","confirmed","checked_in","checked_out","cancelled","no_show"],default:"pending"},confirmedAt:Date,checkedInAt:Date,checkedOutAt:Date,cancelledAt:Date,requiresApproval:{type:Boolean,default:!1},approvalStatus:{type:String,enum:["pending","approved","rejected"]},approvedBy:{type:a().Schema.Types.ObjectId,ref:"User"},rejectionReason:String,specialRequests:String,internalNotes:String,createdBy:{type:a().Schema.Types.ObjectId,ref:"User"},lastModifiedBy:{type:a().Schema.Types.ObjectId,ref:"User"},commission:{rate:Number,amount:Number,collected:{type:Boolean,default:!1}}},{timestamps:!0});n.index({hotelId:1,checkIn:1,checkOut:1}),n.index({hotelId:1,status:1}),n.index({guestId:1});let i=a().models.Booking||a().model("Booking",n)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[1638,7439,6082,7217,1476,867,1091],()=>r(25593));module.exports=s})();