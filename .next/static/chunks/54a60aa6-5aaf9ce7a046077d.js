"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7902],{40318:function(e,t,n){n.d(t,{Cf:function(){return tj},EG:function(){return eU},FZ:function(){return tN},Ig:function(){return er},K9:function(){return tK},NB:function(){return tY},NI:function(){return tV},NY:function(){return e_},Nl:function(){return eM},P1:function(){return eA},QC:function(){return ez},S0:function(){return tB},Sz:function(){return eW},XP:function(){return ev},b5:function(){return ex},bR:function(){return eq},hj:function(){return tk},jo:function(){return x},m7:function(){return eC},nU:function(){return e$},rI:function(){return eV},tI:function(){return eD},u9:function(){return eP},vc:function(){return tf},wm:function(){return tW},x2:function(){return tI},zK:function(){return tR}});var r=n(49430),o=n(98615),i=n(19672),a=n(49975),s=n(54736),l=n(54933),d=Object.defineProperty,c=(e,t)=>{for(var n in t)d(e,n,{get:t[n],enumerable:!0})};function u(e){let{state:t,transaction:n}=e,{selection:r}=n,{doc:o}=n,{storedMarks:i}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,i=n.storedMarks,n}}}var p=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){let{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:o}=n,i=this.buildProps(o);return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,(...e)=>{let n=t(...e)(i);return o.getMeta("preventDispatch")||this.hasCustomState||r.dispatch(o),n}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){let{rawCommands:n,editor:r,state:o}=this,{view:i}=r,a=[],s=!!e,l=e||o.tr,d={...Object.fromEntries(Object.entries(n).map(([e,n])=>[e,(...e)=>{let r=this.buildProps(l,t),o=n(...e)(r);return a.push(o),d}])),run:()=>(s||!t||l.getMeta("preventDispatch")||this.hasCustomState||i.dispatch(l),a.every(e=>!0===e))};return d}createCan(e){let{rawCommands:t,state:n}=this,r=e||n.tr,o=this.buildProps(r,!1);return{...Object.fromEntries(Object.entries(t).map(([e,t])=>[e,(...e)=>t(...e)({...o,dispatch:void 0})])),chain:()=>this.createChain(r,!1)}}buildProps(e,t=!0){let{rawCommands:n,editor:r,state:o}=this,{view:i}=r,a={tr:e,editor:r,view:i,state:u({state:o,transaction:e}),dispatch:t?()=>void 0:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([e,t])=>[e,(...e)=>t(...e)(a)]))}};return a}},f={};c(f,{blur:()=>m,clearContent:()=>h,clearNodes:()=>g,command:()=>y,createParagraphNear:()=>b,cut:()=>k,deleteCurrentNode:()=>v,deleteNode:()=>w,deleteRange:()=>M,deleteSelection:()=>E,enter:()=>S,exitCode:()=>$,extendMarkRange:()=>R,first:()=>B,focus:()=>_,forEach:()=>H,insertContent:()=>L,insertContentAt:()=>K,joinBackward:()=>J,joinDown:()=>U,joinForward:()=>Z,joinItemBackward:()=>Q,joinItemForward:()=>G,joinTextblockBackward:()=>X,joinTextblockForward:()=>ee,joinUp:()=>q,keyboardShortcut:()=>en,lift:()=>eo,liftEmptyBlock:()=>ei,liftListItem:()=>ea,newlineInCode:()=>es,resetAttributes:()=>ec,scrollIntoView:()=>eu,selectAll:()=>ep,selectNodeBackward:()=>ef,selectNodeForward:()=>em,selectParentNode:()=>eh,selectTextblockEnd:()=>eg,selectTextblockStart:()=>ey,setContent:()=>eb,setMark:()=>eJ,setMeta:()=>eZ,setNode:()=>eQ,setNodeSelection:()=>eG,setTextDirection:()=>eX,setTextSelection:()=>e0,sinkListItem:()=>e1,splitBlock:()=>e3,splitListItem:()=>e9,toggleList:()=>e7,toggleMark:()=>e6,toggleNode:()=>e8,toggleWrap:()=>te,undoInputRule:()=>tt,unsetAllMarks:()=>tn,unsetMark:()=>tr,unsetTextDirection:()=>to,updateAttributes:()=>ti,wrapIn:()=>ta,wrapInList:()=>ts});var m=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),null==(n=null==window?void 0:window.getSelection())||n.removeAllRanges())}),!0),h=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),g=()=>({state:e,tr:t,dispatch:n})=>{let{selection:o}=t,{ranges:i}=o;return!n||(i.forEach(({$from:n,$to:o})=>{e.doc.nodesBetween(n.pos,o.pos,(e,n)=>{if(e.type.isText)return;let{doc:o,mapping:i}=t,a=o.resolve(i.map(n)),s=o.resolve(i.map(n+e.nodeSize)),l=a.blockRange(s);if(!l)return;let d=(0,r.k9)(l);if(e.type.isTextblock){let{defaultType:e}=a.parent.contentMatchAt(a.index());t.setNodeMarkup(l.start,e)}(d||0===d)&&t.lift(l,d)})}),!0)},y=e=>t=>e(t),b=()=>({state:e,dispatch:t})=>(0,o.mD)(e,t),k=(e,t)=>({editor:n,tr:r})=>{let{state:o}=n,a=o.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);let s=r.mapping.map(t);return r.insert(s,a.content),r.setSelection(new i.Bs(r.doc.resolve(Math.max(s-1,0)))),!0},v=()=>({tr:e,dispatch:t})=>{let{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;let o=e.selection.$anchor;for(let n=o.depth;n>0;n-=1)if(o.node(n).type===r.type){if(t){let t=o.before(n),r=o.after(n);e.delete(t,r).scrollIntoView()}return!0}return!1};function x(e,t){if("string"==typeof e){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}var w=e=>({tr:t,state:n,dispatch:r})=>{let o=x(e,n.schema),i=t.selection.$anchor;for(let e=i.depth;e>0;e-=1)if(i.node(e).type===o){if(r){let n=i.before(e),r=i.after(e);t.delete(n,r).scrollIntoView()}return!0}return!1},M=e=>({tr:t,dispatch:n})=>{let{from:r,to:o}=e;return n&&t.delete(r,o),!0},E=()=>({state:e,dispatch:t})=>(0,o.NE)(e,t),S=()=>({commands:e})=>e.keyboardShortcut("Enter"),$=()=>({state:e,dispatch:t})=>(0,o.uo)(e,t);function O(e){return"[object RegExp]"===Object.prototype.toString.call(e)}function T(e,t,n={strict:!0}){let r=Object.keys(t);return!r.length||r.every(r=>n.strict?t[r]===e[r]:O(t[r])?t[r].test(e[r]):t[r]===e[r])}function A(e,t,n={}){return e.find(e=>e.type===t&&T(Object.fromEntries(Object.keys(n).map(t=>[t,e.attrs[t]])),n))}function C(e,t,n={}){return!!A(e,t,n)}function j(e,t,n){var r;if(!e||!t)return;let o=e.parent.childAfter(e.parentOffset);if(o.node&&o.node.marks.some(e=>e.type===t)||(o=e.parent.childBefore(e.parentOffset)),!o.node||!o.node.marks.some(e=>e.type===t)||(n=n||(null==(r=o.node.marks[0])?void 0:r.attrs),!A([...o.node.marks],t,n)))return;let i=o.index,a=e.start()+o.offset,s=i+1,l=a+o.node.nodeSize;for(;i>0&&C([...e.parent.child(i-1).marks],t,n);)i-=1,a-=e.parent.child(i).nodeSize;for(;s<e.parent.childCount&&C([...e.parent.child(s).marks],t,n);)l+=e.parent.child(s).nodeSize,s+=1;return{from:a,to:l}}function I(e,t){if("string"==typeof e){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}var R=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let a=I(e,r.schema),{doc:s,selection:l}=n,{$from:d,from:c,to:u}=l;if(o){let e=j(d,a,t);if(e&&e.from<=c&&e.to>=u){let t=i.Bs.create(s,e.from,e.to);n.setSelection(t)}}return!0},B=e=>t=>{let n="function"==typeof e?e(t):e;for(let e=0;e<n.length;e+=1)if(n[e](t))return!0;return!1};function N(e){return e instanceof i.Bs}function P(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function z(){return"Android"===navigator.platform||/android/i.test(navigator.userAgent)}function D(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var _=(e=null,t={})=>({editor:n,view:r,tr:o,dispatch:a})=>{t={scrollIntoView:!0,...t};let s=()=>{(D()||z())&&r.dom.focus(),"undefined"!=typeof navigator&&/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!D()&&!z()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{!n.isDestroyed&&(r.focus(),(null==t?void 0:t.scrollIntoView)&&n.commands.scrollIntoView())})};if(r.hasFocus()&&null===e||!1===e)return!0;if(a&&null===e&&!N(n.state.selection))return s(),!0;let l=function(e,t=null){if(!t)return null;let n=i.Y1.atStart(e),r=i.Y1.atEnd(e);if("start"===t||!0===t)return n;if("end"===t)return r;let o=n.from,a=r.to;return"all"===t?i.Bs.create(e,P(0,o,a),P(e.content.size,o,a)):i.Bs.create(e,P(t,o,a),P(t,o,a))}(o.doc,e)||n.state.selection,d=n.state.selection.eq(l);return a&&(d||o.setSelection(l),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},H=(e,t)=>n=>e.every((e,r)=>t(e,{...n,index:r})),L=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),F=e=>{let t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){let r=t[n];3===r.nodeType&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):1===r.nodeType&&F(r)}return e};function V(e){if("undefined"==typeof window)throw Error("[tiptap error]: there is no window object available, so this function cannot be used");let t=`<body>${e}</body>`;return F(new window.DOMParser().parseFromString(t,"text/html").body)}function W(e,t,n){if(e instanceof a.NB||e instanceof a.HY)return e;n={slice:!0,parseOptions:{},...n};let r="object"==typeof e&&null!==e,o="string"==typeof e;if(r)try{if(Array.isArray(e)&&e.length>0)return a.HY.fromArray(e.map(e=>t.nodeFromJSON(e)));let r=t.nodeFromJSON(e);return n.errorOnInvalidContent&&r.check(),r}catch(r){if(n.errorOnInvalidContent)throw Error("[tiptap error]: Invalid JSON content",{cause:r});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",r),W("",t,n)}if(o){if(n.errorOnInvalidContent){let r=!1,o="",i=new a.V_({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:e=>(r=!0,o="string"==typeof e?e:e.outerHTML,null)}]}})});if(n.slice?a.aw.fromSchema(i).parseSlice(V(e),n.parseOptions):a.aw.fromSchema(i).parse(V(e),n.parseOptions),n.errorOnInvalidContent&&r)throw Error("[tiptap error]: Invalid HTML content",{cause:Error(`Invalid element found: ${o}`)})}let r=a.aw.fromSchema(t);return n.slice?r.parseSlice(V(e),n.parseOptions).content:r.parse(V(e),n.parseOptions)}return W("",t,n)}var Y=e=>!("type"in e),K=(e,t,n)=>({tr:o,dispatch:s,editor:l})=>{var d;if(s){let s,c;n={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u=e=>{l.emit("contentError",{editor:l,error:e,disableCollaboration:()=>{"collaboration"in l.storage&&"object"==typeof l.storage.collaboration&&l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{W(t,l.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(e){u(e)}try{s=W(t,l.schema,{parseOptions:p,errorOnInvalidContent:null!=(d=n.errorOnInvalidContent)?d:l.options.enableContentCheck})}catch(e){return u(e),!1}let{from:f,to:m}="number"==typeof e?{from:e,to:e}:{from:e.from,to:e.to},h=!0,g=!0;if((Y(s)?s:[s]).forEach(e=>{e.check(),h=!!h&&e.isText&&0===e.marks.length,g=!!g&&e.isBlock}),f===m&&g){let{parent:e}=o.doc.resolve(f);!e.isTextblock||e.type.spec.code||e.childCount||(f-=1,m+=1)}if(h){if(Array.isArray(t))c=t.map(e=>e.text||"").join("");else if(t instanceof a.HY){let e="";t.forEach(t=>{t.text&&(e+=t.text)}),c=e}else c="object"==typeof t&&t&&t.text?t.text:t;o.insertText(c,f,m)}else{c=s;let e=o.doc.resolve(f),t=e.node(),n=0===e.parentOffset,r=t.isText||t.isTextblock,i=t.content.size>0;n&&r&&i&&(f=Math.max(0,f-1)),o.replaceWith(f,m,c)}n.updateSelection&&function(e,t,n){let o=e.steps.length-1;if(o<t)return;let a=e.steps[o];if(!(a instanceof r.Pu||a instanceof r.FC))return;let s=e.mapping.maps[o],l=0;s.forEach((e,t,n,r)=>{0===l&&(l=r)}),e.setSelection(i.Y1.near(e.doc.resolve(l),-1))}(o,o.steps.length-1,0),n.applyInputRules&&o.setMeta("applyInputRules",{from:f,text:c}),n.applyPasteRules&&o.setMeta("applyPasteRules",{from:f,text:c})}return!0},q=()=>({state:e,dispatch:t})=>(0,o.MI)(e,t),U=()=>({state:e,dispatch:t})=>(0,o.Ig)(e,t),J=()=>({state:e,dispatch:t})=>(0,o.al)(e,t),Z=()=>({state:e,dispatch:t})=>(0,o.Y_)(e,t),Q=()=>({state:e,dispatch:t,tr:n})=>{try{let o=(0,r.GJ)(e.doc,e.selection.$from.pos,-1);if(null==o)return!1;return n.join(o,2),t&&t(n),!0}catch{return!1}},G=()=>({state:e,dispatch:t,tr:n})=>{try{let o=(0,r.GJ)(e.doc,e.selection.$from.pos,1);if(null==o)return!1;return n.join(o,2),t&&t(n),!0}catch{return!1}},X=()=>({state:e,dispatch:t})=>(0,o.rr)(e,t),ee=()=>({state:e,dispatch:t})=>(0,o.cR)(e,t);function et(){return"undefined"!=typeof navigator&&/Mac/.test(navigator.platform)}var en=e=>({editor:t,view:n,tr:r,dispatch:o})=>{let i=(function(e){let t,n,r,o;let i=e.split(/-(?!$)/),a=i[i.length-1];"Space"===a&&(a=" ");for(let e=0;e<i.length-1;e+=1){let a=i[e];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))t=!0;else if(/^(c|ctrl|control)$/i.test(a))n=!0;else if(/^s(hift)?$/i.test(a))r=!0;else if(/^mod$/i.test(a))D()||et()?o=!0:n=!0;else throw Error(`Unrecognized modifier name: ${a}`)}return t&&(a=`Alt-${a}`),n&&(a=`Ctrl-${a}`),o&&(a=`Meta-${a}`),r&&(a=`Shift-${a}`),a})(e).split(/-(?!$)/),a=i.find(e=>!["Alt","Ctrl","Meta","Shift"].includes(e)),s=new KeyboardEvent("keydown",{key:"Space"===a?" ":a,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=t.captureTransaction(()=>{n.someProp("handleKeyDown",e=>e(n,s))});return null==l||l.steps.forEach(e=>{let t=e.map(r.mapping);t&&o&&r.maybeStep(t)}),!0};function er(e,t,n={}){let{from:r,to:o,empty:i}=e.selection,a=t?x(t,e.schema):null,s=[];e.doc.nodesBetween(r,o,(e,t)=>{if(e.isText)return;let n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);s.push({node:e,from:n,to:i})});let l=o-r,d=s.filter(e=>!a||a.name===e.node.type.name).filter(e=>T(e.node.attrs,n,{strict:!1}));return i?!!d.length:d.reduce((e,t)=>e+t.to-t.from,0)>=l}var eo=(e,t={})=>({state:n,dispatch:r})=>{let i=x(e,n.schema);return!!er(n,i,t)&&(0,o.xb)(n,r)},ei=()=>({state:e,dispatch:t})=>(0,o.X0)(e,t),ea=e=>({state:t,dispatch:n})=>{let r=x(e,t.schema);return(0,s.IB)(r)(t,n)},es=()=>({state:e,dispatch:t})=>(0,o.QK)(e,t);function el(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function ed(e,t){let n="string"==typeof t?[t]:t;return Object.keys(e).reduce((t,r)=>(n.includes(r)||(t[r]=e[r]),t),{})}var ec=(e,t)=>({tr:n,state:r,dispatch:o})=>{let i=null,a=null,s=el("string"==typeof e?e:e.name,r.schema);if(!s)return!1;"node"===s&&(i=x(e,r.schema)),"mark"===s&&(a=I(e,r.schema));let l=!1;return n.selection.ranges.forEach(e=>{r.doc.nodesBetween(e.$from.pos,e.$to.pos,(e,r)=>{i&&i===e.type&&(l=!0,o&&n.setNodeMarkup(r,void 0,ed(e.attrs,t))),a&&e.marks.length&&e.marks.forEach(i=>{a===i.type&&(l=!0,o&&n.addMark(r,r+e.nodeSize,a.create(ed(i.attrs,t))))})})}),l},eu=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),ep=()=>({tr:e,dispatch:t})=>{if(t){let t=new i.C1(e.doc);e.setSelection(t)}return!0},ef=()=>({state:e,dispatch:t})=>(0,o._M)(e,t),em=()=>({state:e,dispatch:t})=>(0,o.o)(e,t),eh=()=>({state:e,dispatch:t})=>(0,o.N0)(e,t),eg=()=>({state:e,dispatch:t})=>(0,o.nw)(e,t),ey=()=>({state:e,dispatch:t})=>(0,o.U9)(e,t),eb=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:i,dispatch:a,commands:s})=>{let{doc:l}=i;if("full"!==r.preserveWhitespace){let s=function(e,t,n={},r={}){return W(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}(e,o.schema,r,{errorOnInvalidContent:null!=t?t:o.options.enableContentCheck});return a&&i.replaceWith(0,l.content.size,s).setMeta("preventUpdate",!n),!0}return a&&i.setMeta("preventUpdate",!n),s.insertContentAt({from:0,to:l.content.size},e,{parseOptions:r,errorOnInvalidContent:null!=t?t:o.options.enableContentCheck})};function ek(e,t){let n=I(t,e.schema),{from:r,to:o,empty:i}=e.selection,a=[];i?(e.storedMarks&&a.push(...e.storedMarks),a.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,o,e=>{a.push(...e.marks)});let s=a.find(e=>e.type.name===n.name);return s?{...s.attrs}:{}}function ev(e,t){let n=new r.wx(e);return t.forEach(e=>{e.steps.forEach(e=>{n.step(e)})}),n}function ex(e,t,n){let r=[];return e.nodesBetween(t.from,t.to,(e,t)=>{n(e)&&r.push({node:e,pos:t})}),r}function ew(e){return t=>(function(e,t){for(let n=e.depth;n>0;n-=1){let r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}})(t.$from,e)}function eM(e,t,n){return void 0===e.config[t]&&e.parent?eM(e.parent,t,n):"function"==typeof e.config[t]?e.config[t].bind({...n,parent:e.parent?eM(e.parent,t,n):null}):e.config[t]}function eE(e){return e.map(e=>{let t={name:e.name,options:e.options,storage:e.storage},n=eM(e,"addExtensions",t);return n?[e,...eE(n())]:e}).flat(10)}function eS(e,t){let n=a.PW.fromSchema(t).serializeFragment(e),r=document.implementation.createHTMLDocument().createElement("div");return r.appendChild(n),r.innerHTML}function e$(e,t,...n){return"function"==typeof e?t?e.bind(t)(...n):e(...n):e}function eO(e){return{baseExtensions:e.filter(e=>"extension"===e.type),nodeExtensions:e.filter(e=>"node"===e.type),markExtensions:e.filter(e=>"mark"===e.type)}}function eT(e){let t=[],{nodeExtensions:n,markExtensions:r}=eO(e),o=[...n,...r],i={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage,extensions:o},r=eM(e,"addGlobalAttributes",n);r&&r().forEach(e=>{e.types.forEach(n=>{Object.entries(e.attributes).forEach(([e,r])=>{t.push({type:n,name:e,attribute:{...i,...r}})})})})}),o.forEach(e=>{let n={name:e.name,options:e.options,storage:e.storage},r=eM(e,"addAttributes",n);r&&Object.entries(r()).forEach(([n,r])=>{let o={...i,...r};"function"==typeof(null==o?void 0:o.default)&&(o.default=o.default()),(null==o?void 0:o.isRequired)&&(null==o?void 0:o.default)===void 0&&delete o.default,t.push({type:e.name,name:n,attribute:o})})}),t}function eA(...e){return e.filter(e=>!!e).reduce((e,t)=>{let n={...e};return Object.entries(t).forEach(([e,t])=>{if(!n[e]){n[e]=t;return}if("class"===e){let r=t?String(t).split(" "):[],o=n[e]?n[e].split(" "):[],i=r.filter(e=>!o.includes(e));n[e]=[...o,...i].join(" ")}else if("style"===e){let r=t?t.split(";").map(e=>e.trim()).filter(Boolean):[],o=n[e]?n[e].split(";").map(e=>e.trim()).filter(Boolean):[],i=new Map;o.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),r.forEach(e=>{let[t,n]=e.split(":").map(e=>e.trim());i.set(t,n)}),n[e]=Array.from(i.entries()).map(([e,t])=>`${e}: ${t}`).join("; ")}else n[e]=t}),n},{})}function eC(e,t){return t.filter(t=>t.type===e.type.name).filter(e=>e.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(e.attrs)||{}:{[t.name]:e.attrs[t.name]}).reduce((e,t)=>eA(e,t),{})}function ej(e,t){return"style"in e?e:{...e,getAttrs:n=>{let r=e.getAttrs?e.getAttrs(n):e.attrs;if(!1===r)return!1;let o=t.reduce((e,t)=>{var r;let o=t.attribute.parseHTML?t.attribute.parseHTML(n):"string"!=typeof(r=n.getAttribute(t.name))?r:r.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(r):"true"===r||"false"!==r&&r;return null==o?e:{...e,[t.name]:o}},{});return{...r,...o}}}}function eI(e){return Object.fromEntries(Object.entries(e).filter(([e,t])=>!("attrs"===e&&function(e={}){return 0===Object.keys(e).length&&e.constructor===Object}(t))&&null!=t))}function eR(e){var t,n;let r={};return!(null==(t=null==e?void 0:e.attribute)?void 0:t.isRequired)&&"default"in((null==e?void 0:e.attribute)||{})&&(r.default=e.attribute.default),(null==(n=null==e?void 0:e.attribute)?void 0:n.validate)!==void 0&&(r.validate=e.attribute.validate),[e.name,r]}function eB(e){return e.sort((e,t)=>{let n=eM(e,"priority")||100,r=eM(t,"priority")||100;return n>r?-1:n<r?1:0})}function eN(e){let t=eB(eE(e)),n=function(e){let t=e.filter((t,n)=>e.indexOf(t)!==n);return Array.from(new Set(t))}(t.map(e=>e.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(e=>`'${e}'`).join(", ")}]. This can lead to issues.`),t}function eP(e,t){let n=el("string"==typeof t?t:t.name,e.schema);return"node"===n?function(e,t){let n=x(t,e.schema),{from:r,to:o}=e.selection,i=[];e.doc.nodesBetween(r,o,e=>{i.push(e)});let a=i.reverse().find(e=>e.type.name===n.name);return a?{...a.attrs}:{}}(e,t):"mark"===n?ek(e,t):{}}function ez(e){let{mapping:t,steps:n}=e,r=[];return t.maps.forEach((e,o)=>{let i=[];if(e.ranges.length)e.forEach((e,t)=>{i.push({from:e,to:t})});else{let{from:e,to:t}=n[o];if(void 0===e||void 0===t)return;i.push({from:e,to:t})}i.forEach(({from:e,to:n})=>{let i=t.slice(o).map(e,-1),a=t.slice(o).map(n),s=t.invert().map(i,-1),l=t.invert().map(a);r.push({oldRange:{from:s,to:l},newRange:{from:i,to:a}})})}),function(e){let t=function(e,t=JSON.stringify){let n={};return e.filter(e=>{let r=t(e);return!Object.prototype.hasOwnProperty.call(n,r)&&(n[r]=!0)})}(e);return 1===t.length?t:t.filter((e,n)=>!t.filter((e,t)=>t!==n).some(t=>e.oldRange.from>=t.oldRange.from&&e.oldRange.to<=t.oldRange.to&&e.newRange.from>=t.newRange.from&&e.newRange.to<=t.newRange.to))}(r)}function eD(e,t,n){let r=[];return e===t?n.resolve(e).marks().forEach(t=>{let o=j(n.resolve(e),t.type);o&&r.push({mark:t,...o})}):n.nodesBetween(e,t,(e,t)=>{e&&(null==e?void 0:e.nodeSize)!==void 0&&r.push(...e.marks.map(n=>({from:t,to:t+e.nodeSize,mark:n})))}),r}var e_=(e,t,n,r=20)=>{let o=e.doc.resolve(n),i=r,a=null;for(;i>0&&null===a;){let e=o.node(i);(null==e?void 0:e.type.name)===t?a=e:i-=1}return[a,i]};function eH(e,t){return t.nodes[e]||t.marks[e]||null}function eL(e,t,n){return Object.fromEntries(Object.entries(n).filter(([n])=>{let r=e.find(e=>e.type===t&&e.name===n);return!!r&&r.attribute.keepOnSplit}))}var eF=(e,t=500)=>{let n="",r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(e,t,o,i)=>{var a,s;let l=(null==(s=(a=e.type.spec).toText)?void 0:s.call(a,{node:e,pos:t,parent:o,index:i}))||e.textContent||"%leaf%";n+=e.isAtom&&!e.isText?l:l.slice(0,Math.max(0,r-t))}),n},eV=(e,t)=>{let{$from:n,$to:r,$anchor:o}=e.selection;if(t){let n=ew(e=>e.type.name===t)(e.selection);if(!n)return!1;let r=e.doc.resolve(n.pos+1);return o.pos+1===r.end()}return!(r.parentOffset<r.parent.nodeSize-2)&&n.pos===r.pos},eW=e=>{let{$from:t,$to:n}=e.selection;return!(t.parentOffset>0)&&t.pos===n.pos};function eY(e,t){return Array.isArray(t)?t.some(t=>("string"==typeof t?t:t.name)===e.name):t}function eK(e,t){let{nodeExtensions:n}=eO(t),r=n.find(t=>t.name===e);if(!r)return!1;let o={name:r.name,options:r.options,storage:r.storage},i=e$(eM(r,"group",o));return"string"==typeof i&&i.split(" ").includes("list")}function eq(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if("hardBreak"===e.type.name)return!0;if(e.isText)return/^\s*$/m.test(null!=(r=e.text)?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(0===e.content.childCount)return!0;if(t){let r=!0;return e.content.forEach(e=>{!1!==r&&(eq(e,{ignoreWhitespace:n,checkChildren:t})||(r=!1))}),r}return!1}function eU(e){return e instanceof i.qv}var eJ=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let{selection:i}=n,{empty:a,ranges:s}=i,l=I(e,r.schema);if(o){if(a){let e=ek(r,l);n.addStoredMark(l.create({...e,...t}))}else s.forEach(e=>{let o=e.$from.pos,i=e.$to.pos;r.doc.nodesBetween(o,i,(e,r)=>{let a=Math.max(r,o),s=Math.min(r+e.nodeSize,i);e.marks.find(e=>e.type===l)?e.marks.forEach(e=>{l===e.type&&n.addMark(a,s,l.create({...e.attrs,...t}))}):n.addMark(a,s,l.create(t))})})}return function(e,t,n){var r;let{selection:o}=t,i=null;if(N(o)&&(i=o.$cursor),i){let t=null!=(r=e.storedMarks)?r:i.marks();return i.parent.type.allowsMarkType(n)&&(!!n.isInSet(t)||!t.some(e=>e.type.excludes(n)))}let{ranges:a}=o;return a.some(({$from:t,$to:r})=>{let o=0===t.depth&&e.doc.inlineContent&&e.doc.type.allowsMarkType(n);return e.doc.nodesBetween(t.pos,r.pos,(e,t,r)=>{if(o)return!1;if(e.isInline){let t=!r||r.type.allowsMarkType(n),i=!!n.isInSet(e.marks)||!e.marks.some(e=>e.type.excludes(n));o=t&&i}return!o}),o})}(r,n,l)},eZ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),eQ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{let a;let s=x(e,n.schema);return(n.selection.$anchor.sameParent(n.selection.$head)&&(a=n.selection.$anchor.parent.attrs),s.isTextblock)?i().command(({commands:e})=>!!(0,o.uJ)(s,{...a,...t})(n)||e.clearNodes()).command(({state:e})=>(0,o.uJ)(s,{...a,...t})(e,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},eG=e=>({tr:t,dispatch:n})=>{if(n){let{doc:n}=t,r=P(e,0,n.content.size),o=i.qv.create(n,r);t.setSelection(o)}return!0},eX=(e,t)=>({tr:n,state:r,dispatch:o})=>{let i,a;let{selection:s}=r;return"number"==typeof t?(i=t,a=t):t&&"from"in t&&"to"in t?(i=t.from,a=t.to):(i=s.from,a=s.to),o&&n.doc.nodesBetween(i,a,(t,r)=>{t.isText||n.setNodeMarkup(r,void 0,{...t.attrs,dir:e})}),!0},e0=e=>({tr:t,dispatch:n})=>{if(n){let{doc:n}=t,{from:r,to:o}="number"==typeof e?{from:e,to:e}:e,a=i.Bs.atStart(n).from,s=i.Bs.atEnd(n).to,l=P(r,a,s),d=P(o,a,s),c=i.Bs.create(n,l,d);t.setSelection(c)}return!0},e1=e=>({state:t,dispatch:n})=>{let r=x(e,t.schema);return(0,s.bw)(r)(t,n)};function e2(e,t){let n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){let r=n.filter(e=>null==t?void 0:t.includes(e.type.name));e.tr.ensureMarks(r)}}var e3=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:o,editor:a})=>{let{selection:s,doc:l}=t,{$from:d,$to:c}=s,u=eL(a.extensionManager.attributes,d.node().type.name,d.node().attrs);if(s instanceof i.qv&&s.node.isBlock)return!!(d.parentOffset&&(0,r.Ax)(l,d.pos))&&(o&&(e&&e2(n,a.extensionManager.splittableMarks),t.split(d.pos).scrollIntoView()),!0);if(!d.parent.isBlock)return!1;let p=c.parentOffset===c.parent.content.size,f=0===d.depth?void 0:function(e){for(let t=0;t<e.edgeCount;t+=1){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}(d.node(-1).contentMatchAt(d.indexAfter(-1))),m=p&&f?[{type:f,attrs:u}]:void 0,h=(0,r.Ax)(t.doc,t.mapping.map(d.pos),1,m);if(!m&&!h&&(0,r.Ax)(t.doc,t.mapping.map(d.pos),1,f?[{type:f}]:void 0)&&(h=!0,m=f?[{type:f,attrs:u}]:void 0),o){if(h&&(s instanceof i.Bs&&t.deleteSelection(),t.split(t.mapping.map(d.pos),1,m),f&&!p&&!d.parentOffset&&d.parent.type!==f)){let e=t.mapping.map(d.before()),n=t.doc.resolve(e);d.node(-1).canReplaceWith(n.index(),n.index()+1,f)&&t.setNodeMarkup(t.mapping.map(d.before()),f)}e&&e2(n,a.extensionManager.splittableMarks),t.scrollIntoView()}return h},e9=(e,t={})=>({tr:n,state:o,dispatch:s,editor:l})=>{var d;let c=x(e,o.schema),{$from:u,$to:p}=o.selection,f=o.selection.node;if(f&&f.isBlock||u.depth<2||!u.sameParent(p))return!1;let m=u.node(-1);if(m.type!==c)return!1;let h=l.extensionManager.attributes;if(0===u.parent.content.size&&u.node(-1).childCount===u.indexAfter(-1)){if(2===u.depth||u.node(-3).type!==c||u.index(-2)!==u.node(-2).childCount-1)return!1;if(s){let e=a.HY.empty,r=u.index(-1)?1:u.index(-2)?2:3;for(let t=u.depth-r;t>=u.depth-3;t-=1)e=a.HY.from(u.node(t).copy(e));let o=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,s={...eL(h,u.node().type.name,u.node().attrs),...t},l=(null==(d=c.contentMatch.defaultType)?void 0:d.createAndFill(s))||void 0;e=e.append(a.HY.from(c.createAndFill(null,l)||void 0));let p=u.before(u.depth-(r-1));n.replace(p,u.after(-o),new a.p2(e,4-r,0));let f=-1;n.doc.nodesBetween(p,n.doc.content.size,(e,t)=>{if(f>-1)return!1;e.isTextblock&&0===e.content.size&&(f=t+1)}),f>-1&&n.setSelection(i.Bs.near(n.doc.resolve(f))),n.scrollIntoView()}return!0}let g=p.pos===u.end()?m.contentMatchAt(0).defaultType:null,y={...eL(h,m.type.name,m.attrs),...t},b={...eL(h,u.node().type.name,u.node().attrs),...t};if(n.delete(u.pos,p.pos),!(0,r.Ax)(n.doc,u.pos,2))return!1;if(s){let{selection:e,storedMarks:t}=o,{splittableMarks:r}=l.extensionManager,i=t||e.$to.parentOffset&&e.$from.marks();if(n.split(u.pos,2,g?[{type:c,attrs:y},{type:g,attrs:b}]:[{type:c,attrs:y}]).scrollIntoView(),!i||!s)return!0;let a=i.filter(e=>r.includes(e.type.name));n.ensureMarks(a)}return!0},e4=(e,t)=>{let n=ew(e=>e.type===t)(e.selection);if(!n)return!0;let o=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(void 0===o)return!0;let i=e.doc.nodeAt(o);return!(n.node.type===(null==i?void 0:i.type)&&(0,r.Mn)(e.doc,n.pos))||(e.join(n.pos),!0)},e5=(e,t)=>{let n=ew(e=>e.type===t)(e.selection);if(!n)return!0;let o=e.doc.resolve(n.start).after(n.depth);if(void 0===o)return!0;let i=e.doc.nodeAt(o);return!(n.node.type===(null==i?void 0:i.type)&&(0,r.Mn)(e.doc,o))||(e.join(o),!0)},e7=(e,t,n,r={})=>({editor:o,tr:i,state:a,dispatch:s,chain:l,commands:d,can:c})=>{let{extensions:u,splittableMarks:p}=o.extensionManager,f=x(e,a.schema),m=x(t,a.schema),{selection:h,storedMarks:g}=a,{$from:y,$to:b}=h,k=y.blockRange(b),v=g||h.$to.parentOffset&&h.$from.marks();if(!k)return!1;let w=ew(e=>eK(e.type.name,u))(h);if(k.depth>=1&&w&&k.depth-w.depth<=1){if(w.node.type===f)return d.liftListItem(m);if(eK(w.node.type.name,u)&&f.validContent(w.node.content)&&s)return l().command(()=>(i.setNodeMarkup(w.pos,f),!0)).command(()=>e4(i,f)).command(()=>e5(i,f)).run()}return n&&v&&s?l().command(()=>{let e=c().wrapInList(f,r),t=v.filter(e=>p.includes(e.type.name));return i.ensureMarks(t),!!e||d.clearNodes()}).wrapInList(f,r).command(()=>e4(i,f)).command(()=>e5(i,f)).run():l().command(()=>!!c().wrapInList(f,r)||d.clearNodes()).wrapInList(f,r).command(()=>e4(i,f)).command(()=>e5(i,f)).run()},e6=(e,t={},n={})=>({state:r,commands:o})=>{let{extendEmptyMarkRange:i=!1}=n,a=I(e,r.schema);return!function(e,t,n={}){let{empty:r,ranges:o}=e.selection,i=t?I(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(e=>!i||i.name===e.type.name).find(e=>T(e.attrs,n,{strict:!1}));let a=0,s=[];if(o.forEach(({$from:t,$to:n})=>{let r=t.pos,o=n.pos;e.doc.nodesBetween(r,o,(e,t)=>{if(!e.isText&&!e.marks.length)return;let n=Math.max(r,t),i=Math.min(o,t+e.nodeSize);a+=i-n,s.push(...e.marks.map(e=>({mark:e,from:n,to:i})))})}),0===a)return!1;let l=s.filter(e=>!i||i.name===e.mark.type.name).filter(e=>T(e.mark.attrs,n,{strict:!1})).reduce((e,t)=>e+t.to-t.from,0),d=s.filter(e=>!i||e.mark.type!==i&&e.mark.type.excludes(i)).reduce((e,t)=>e+t.to-t.from,0);return(l>0?l+d:l)>=a}(r,a,t)?o.setMark(a,t):o.unsetMark(a,{extendEmptyMarkRange:i})},e8=(e,t,n={})=>({state:r,commands:o})=>{let i;let a=x(e,r.schema),s=x(t,r.schema),l=er(r,a,n);return(r.selection.$anchor.sameParent(r.selection.$head)&&(i=r.selection.$anchor.parent.attrs),l)?o.setNode(s,i):o.setNode(a,{...i,...n})},te=(e,t={})=>({state:n,commands:r})=>{let o=x(e,n.schema);return er(n,o,t)?r.lift(o):r.wrapIn(o,t)},tt=()=>({state:e,dispatch:t})=>{let n=e.plugins;for(let r=0;r<n.length;r+=1){let o;let i=n[r];if(i.spec.isInputRules&&(o=i.getState(e))){if(t){let t=e.tr,n=o.transform;for(let e=n.steps.length-1;e>=0;e-=1)t.step(n.steps[e].invert(n.docs[e]));if(o.text){let n=t.doc.resolve(o.from).marks();t.replaceWith(o.from,o.to,e.schema.text(o.text,n))}else t.delete(o.from,o.to)}return!0}}return!1},tn=()=>({tr:e,dispatch:t})=>{let{selection:n}=e,{empty:r,ranges:o}=n;return!!r||(t&&o.forEach(t=>{e.removeMark(t.$from.pos,t.$to.pos)}),!0)},tr=(e,t={})=>({tr:n,state:r,dispatch:o})=>{var i;let{extendEmptyMarkRange:a=!1}=t,{selection:s}=n,l=I(e,r.schema),{$from:d,empty:c,ranges:u}=s;if(!o)return!0;if(c&&a){let{from:e,to:t}=s,r=null==(i=d.marks().find(e=>e.type===l))?void 0:i.attrs,o=j(d,l,r);o&&(e=o.from,t=o.to),n.removeMark(e,t,l)}else u.forEach(e=>{n.removeMark(e.$from.pos,e.$to.pos,l)});return n.removeStoredMark(l),!0},to=e=>({tr:t,state:n,dispatch:r})=>{let o,i;let{selection:a}=n;return"number"==typeof e?(o=e,i=e):e&&"from"in e&&"to"in e?(o=e.from,i=e.to):(o=a.from,i=a.to),r&&t.doc.nodesBetween(o,i,(e,n)=>{if(e.isText)return;let r={...e.attrs};delete r.dir,t.setNodeMarkup(n,void 0,r)}),!0},ti=(e,t={})=>({tr:n,state:r,dispatch:o})=>{let i=null,a=null,s=el("string"==typeof e?e:e.name,r.schema);if(!s)return!1;"node"===s&&(i=x(e,r.schema)),"mark"===s&&(a=I(e,r.schema));let l=!1;return n.selection.ranges.forEach(e=>{let s,d,c,u;let p=e.$from.pos,f=e.$to.pos;n.selection.empty?r.doc.nodesBetween(p,f,(e,t)=>{i&&i===e.type&&(l=!0,c=Math.max(t,p),u=Math.min(t+e.nodeSize,f),s=t,d=e)}):r.doc.nodesBetween(p,f,(e,r)=>{r<p&&i&&i===e.type&&(l=!0,c=Math.max(r,p),u=Math.min(r+e.nodeSize,f),s=r,d=e),r>=p&&r<=f&&(i&&i===e.type&&(l=!0,o&&n.setNodeMarkup(r,void 0,{...e.attrs,...t})),a&&e.marks.length&&e.marks.forEach(i=>{if(a===i.type&&(l=!0,o)){let o=Math.max(r,p),s=Math.min(r+e.nodeSize,f);n.addMark(o,s,a.create({...i.attrs,...t}))}}))}),d&&(void 0!==s&&o&&n.setNodeMarkup(s,void 0,{...d.attrs,...t}),a&&d.marks.length&&d.marks.forEach(e=>{a===e.type&&o&&n.addMark(c,u,a.create({...e.attrs,...t}))}))}),l},ta=(e,t={})=>({state:n,dispatch:r})=>{let i=x(e,n.schema);return(0,o.ym)(i,t)(n,r)},ts=(e,t={})=>({state:n,dispatch:r})=>{let o=x(e,n.schema);return(0,s.KI)(o,t)(n,r)},tl=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=null==(t=e.undoable)||t}},td=(e,t)=>{if(O(t))return t.exec(e);let n=t(e);if(!n)return null;let r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function tc(e){var t;let{editor:n,from:r,to:o,text:i,rules:a,plugin:s}=e,{view:l}=n;if(l.composing)return!1;let d=l.state.doc.resolve(r);if(d.parent.type.spec.code||(null==(t=d.nodeBefore||d.nodeAfter)?void 0:t.marks.find(e=>e.type.spec.code)))return!1;let c=!1,f=eF(d)+i;return a.forEach(e=>{if(c)return;let t=td(f,e.find);if(!t)return;let a=l.state.tr,d=u({state:l.state,transaction:a}),m={from:r-(t[0].length-i.length),to:o},{commands:h,chain:g,can:y}=new p({editor:n,state:d});null!==e.handler({state:d,range:m,match:t,commands:h,chain:g,can:y})&&a.steps.length&&(e.undoable&&a.setMeta(s,{transform:a,from:r,to:o,text:i}),l.dispatch(a),c=!0)}),c}function tu(e){return"Object"===Object.prototype.toString.call(e).slice(8,-1)&&e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}var tp=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...e$(eM(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...e$(eM(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){let t=this.extend({...this.config,addOptions:()=>(function e(t,n){let r={...t};return tu(t)&&tu(n)&&Object.keys(n).forEach(o=>{tu(n[o])&&tu(t[o])?r[o]=e(t[o],n[o]):r[o]=n[o]}),r})(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){let t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},tf=class e extends tp{constructor(){super(...arguments),this.type="mark"}static create(t={}){return new e("function"==typeof t?t():t)}static handleExit({editor:e,mark:t}){let{tr:n}=e.state,r=e.state.selection.$from;if(r.pos===r.end()){let o=r.marks();if(!o.find(e=>(null==e?void 0:e.type.name)===t.name))return!1;let i=o.find(e=>(null==e?void 0:e.type.name)===t.name);return i&&n.removeStoredMark(i),n.insertText(" ",r.pos),e.view.dispatch(n),!0}return!1}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}},tm=class{constructor(e){this.find=e.find,this.handler=e.handler}},th=(e,t,n)=>{if(O(t))return[...e.matchAll(t)];let r=t(e,n);return r?r.map(t=>{let n=[t.text];return n.index=t.index,n.input=e,n.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),n.push(t.replaceWith)),n}):[]},tg=null,ty=e=>{var t;let n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return null==(t=n.clipboardData)||t.setData("text/html",e),n},tb=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.baseExtensions=e,this.extensions=eN(e),this.schema=function(e,t){var n;let r=eT(e),{nodeExtensions:o,markExtensions:i}=eO(e),s=null==(n=o.find(e=>eM(e,"topNode")))?void 0:n.name,l=Object.fromEntries(o.map(n=>{let o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=eI({...e.reduce((e,t)=>{let r=eM(t,"extendNodeSchema",i);return{...e,...r?r(n):{}}},{}),content:e$(eM(n,"content",i)),marks:e$(eM(n,"marks",i)),group:e$(eM(n,"group",i)),inline:e$(eM(n,"inline",i)),atom:e$(eM(n,"atom",i)),selectable:e$(eM(n,"selectable",i)),draggable:e$(eM(n,"draggable",i)),code:e$(eM(n,"code",i)),whitespace:e$(eM(n,"whitespace",i)),linebreakReplacement:e$(eM(n,"linebreakReplacement",i)),defining:e$(eM(n,"defining",i)),isolating:e$(eM(n,"isolating",i)),attrs:Object.fromEntries(o.map(eR))}),s=e$(eM(n,"parseHTML",i));s&&(a.parseDOM=s.map(e=>ej(e,o)));let l=eM(n,"renderHTML",i);l&&(a.toDOM=e=>l({node:e,HTMLAttributes:eC(e,o)}));let d=eM(n,"renderText",i);return d&&(a.toText=d),[n.name,a]})),d=Object.fromEntries(i.map(n=>{let o=r.filter(e=>e.type===n.name),i={name:n.name,options:n.options,storage:n.storage,editor:t},a=eI({...e.reduce((e,t)=>{let r=eM(t,"extendMarkSchema",i);return{...e,...r?r(n):{}}},{}),inclusive:e$(eM(n,"inclusive",i)),excludes:e$(eM(n,"excludes",i)),group:e$(eM(n,"group",i)),spanning:e$(eM(n,"spanning",i)),code:e$(eM(n,"code",i)),attrs:Object.fromEntries(o.map(eR))}),s=e$(eM(n,"parseHTML",i));s&&(a.parseDOM=s.map(e=>ej(e,o)));let l=eM(n,"renderHTML",i);return l&&(a.toDOM=e=>l({mark:e,HTMLAttributes:eC(e,o)})),[n.name,a]}));return new a.V_({topNode:s,nodes:l,marks:d})}(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{let n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:eH(t.name,this.schema)},r=eM(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){let{editor:e}=this;return eB([...this.extensions].reverse()).flatMap(t=>{let n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:eH(t.name,this.schema)},r=[],o=eM(t,"addKeyboardShortcuts",n),s={};if("mark"===t.type&&eM(t,"exitable",n)&&(s.ArrowRight=()=>tf.handleExit({editor:e,mark:t})),o){let t=Object.fromEntries(Object.entries(o()).map(([t,n])=>[t,()=>n({editor:e})]));s={...s,...t}}let d=(0,l.h)(s);r.push(d);let c=eM(t,"addInputRules",n);if(eY(t,e.options.enableInputRules)&&c){let t=c();if(t&&t.length){let n=function(e){let{editor:t,rules:n}=e,r=new i.Sy({state:{init:()=>null,apply(e,o,i){let s=e.getMeta(r);if(s)return s;let l=e.getMeta("applyInputRules");return l&&setTimeout(()=>{let{text:e}=l;"string"==typeof e||(e=eS(a.HY.from(e),i.schema));let{from:o}=l,s=o+e.length;tc({editor:t,from:o,to:s,text:e,rules:n,plugin:r})}),e.selectionSet||e.docChanged?null:o}},props:{handleTextInput:(e,o,i,a)=>tc({editor:t,from:o,to:i,text:a,rules:n,plugin:r}),handleDOMEvents:{compositionend:e=>(setTimeout(()=>{let{$cursor:o}=e.state.selection;o&&tc({editor:t,from:o.pos,to:o.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(e,o){if("Enter"!==o.key)return!1;let{$cursor:i}=e.state.selection;return!!i&&tc({editor:t,from:i.pos,to:i.pos,text:"\n",rules:n,plugin:r})}},isInputRules:!0});return r}({editor:e,rules:t}),o=Array.isArray(n)?n:[n];r.push(...o)}}let f=eM(t,"addPasteRules",n);if(eY(t,e.options.enablePasteRules)&&f){let t=f();if(t&&t.length){let n=function(e){let t;let{editor:n,rules:r}=e,o=null,s=!1,l=!1,d="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null;try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{t=null}let c=({state:e,from:r,to:o,rule:i,pasteEvt:a})=>{let s=e.tr;if(function(e){let{editor:t,state:n,from:r,to:o,rule:i,pasteEvent:a,dropEvent:s}=e,{commands:l,chain:d,can:c}=new p({editor:t,state:n}),u=[];return n.doc.nodesBetween(r,o,(e,t)=>{var p,f,m,h,g;if((null==(f=null==(p=e.type)?void 0:p.spec)?void 0:f.code)||!(e.isText||e.isTextblock||e.isInline))return;let y=null!=(g=null!=(h=null==(m=e.content)?void 0:m.size)?h:e.nodeSize)?g:0,b=Math.max(r,t),k=Math.min(o,t+y);b>=k||th(e.isText?e.text||"":e.textBetween(b-t,k-t,void 0,"ï¿¼"),i.find,a).forEach(e=>{if(void 0===e.index)return;let t=b+e.index+1,r=t+e[0].length,o={from:n.tr.mapping.map(t),to:n.tr.mapping.map(r)},p=i.handler({state:n,range:o,match:e,commands:l,chain:d,can:c,pasteEvent:a,dropEvent:s});u.push(p)})}),u.every(e=>null!==e)}({editor:n,state:u({state:e,transaction:s}),from:Math.max(r-1,0),to:o.b-1,rule:i,pasteEvent:a,dropEvent:t})&&s.steps.length){try{t="undefined"!=typeof DragEvent?new DragEvent("drop"):null}catch{t=null}return d="undefined"!=typeof ClipboardEvent?new ClipboardEvent("paste"):null,s}};return r.map(e=>new i.Sy({view(e){let t=t=>{var r;(o=(null==(r=e.dom.parentElement)?void 0:r.contains(t.target))?e.dom.parentElement:null)&&(tg=n)},r=()=>{tg&&(tg=null)};return window.addEventListener("dragstart",t),window.addEventListener("dragend",r),{destroy(){window.removeEventListener("dragstart",t),window.removeEventListener("dragend",r)}}},props:{handleDOMEvents:{drop:(e,n)=>{if(l=o===e.dom.parentElement,t=n,!l){let e=tg;(null==e?void 0:e.isEditable)&&setTimeout(()=>{let t=e.state.selection;t&&e.commands.deleteRange({from:t.from,to:t.to})},10)}return!1},paste:(e,t)=>{var n;let r=null==(n=t.clipboardData)?void 0:n.getData("text/html");return d=t,s=!!(null==r?void 0:r.includes("data-pm-slice")),!1}}},appendTransaction:(t,n,r)=>{let o=t[0],i="paste"===o.getMeta("uiEvent")&&!s,u="drop"===o.getMeta("uiEvent")&&!l,p=o.getMeta("applyPasteRules"),f=!!p;if(!i&&!u&&!f)return;if(f){let{text:t}=p;"string"==typeof t||(t=eS(a.HY.from(t),r.schema));let{from:n}=p,o=n+t.length;return c({rule:e,state:r,from:n,to:{b:o},pasteEvt:ty(t)})}let m=n.doc.content.findDiffStart(r.doc.content),h=n.doc.content.findDiffEnd(r.doc.content);if("number"==typeof m&&h&&m!==h.b)return c({rule:e,state:r,from:m,to:h,pasteEvt:d})}}))}({editor:e,rules:t});r.push(...n)}}let m=eM(t,"addProseMirrorPlugins",n);if(m){let e=m();r.push(...e)}return r})}get attributes(){return eT(this.extensions)}get nodeViews(){let{editor:e}=this,{nodeExtensions:t}=eO(this.extensions);return Object.fromEntries(t.filter(e=>!!eM(e,"addNodeView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:x(t.name,this.schema)},o=eM(t,"addNodeView",r);if(!o)return[];let i=o();return i?[t.name,(r,o,a,s,l)=>{let d=eC(r,n);return i({node:r,view:o,getPos:a,decorations:s,innerDecorations:l,editor:e,extension:t,HTMLAttributes:d})}]:[]}))}dispatchTransaction(e){let{editor:t}=this;return eB([...this.extensions].reverse()).reduceRight((e,n)=>{let r={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:eH(n.name,this.schema)},o=eM(n,"dispatchTransaction",r);return o?t=>{o.call(r,{transaction:t,next:e})}:e},e)}get markViews(){let{editor:e}=this,{markExtensions:t}=eO(this.extensions);return Object.fromEntries(t.filter(e=>!!eM(e,"addMarkView")).map(t=>{let n=this.attributes.filter(e=>e.type===t.name),r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:e,type:I(t.name,this.schema)},o=eM(t,"addMarkView",r);return o?[t.name,(r,i,a)=>{let s=eC(r,n);return o()({mark:r,view:i,inline:a,editor:e,extension:t,HTMLAttributes:s,updateAttributes:t=>{!function(e,t,n={}){let{state:r}=t,{doc:o,tr:i}=r;o.descendants((t,r)=>{let o=i.mapping.map(r),a=i.mapping.map(r)+t.nodeSize,s=null;if(t.marks.forEach(t=>{if(t!==e)return!1;s=t}),!s)return;let l=!1;if(Object.keys(n).forEach(e=>{n[e]!==s.attrs[e]&&(l=!0)}),l){let t=e.type.create({...e.attrs,...n});i.removeMark(o,a,e.type),i.addMark(o,a,t)}}),i.docChanged&&t.view.dispatch(i)}(r,e,t)}})}]:[]}))}setupExtensions(){let e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(e=>[e.name,e.storage])),e.forEach(e=>{var t;let n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:eH(e.name,this.schema)};"mark"===e.type&&(null==(t=e$(eM(e,"keepOnSplit",n)))||t)&&this.splittableMarks.push(e.name);let r=eM(e,"onBeforeCreate",n),o=eM(e,"onCreate",n),i=eM(e,"onUpdate",n),a=eM(e,"onSelectionUpdate",n),s=eM(e,"onTransaction",n),l=eM(e,"onFocus",n),d=eM(e,"onBlur",n),c=eM(e,"onDestroy",n);r&&this.editor.on("beforeCreate",r),o&&this.editor.on("create",o),i&&this.editor.on("update",i),a&&this.editor.on("selectionUpdate",a),s&&this.editor.on("transaction",s),l&&this.editor.on("focus",l),d&&this.editor.on("blur",d),c&&this.editor.on("destroy",c)})}};tb.resolve=eN,tb.sort=eB,tb.flatten=eE,c({},{ClipboardTextSerializer:()=>tv,Commands:()=>tx,Delete:()=>tw,Drop:()=>tM,Editable:()=>tE,FocusEvents:()=>t$,Keymap:()=>tO,Paste:()=>tT,Tabindex:()=>tA,TextDirection:()=>tC,focusEventsPluginKey:()=>tS});var tk=class e extends tp{constructor(){super(...arguments),this.type="extension"}static create(t={}){return new e("function"==typeof t?t():t)}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}},tv=tk.create({name:"clipboardTextSerializer",addOptions:()=>({blockSeparator:void 0}),addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{let{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:o}=t,{ranges:i}=o,a=Math.min(...i.map(e=>e.$from.pos)),s=Math.max(...i.map(e=>e.$to.pos)),l=Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]));return function(e,t,n){let{from:r,to:o}=t,{blockSeparator:i="\n\n",textSerializers:a={}}=n||{},s="";return e.nodesBetween(r,o,(e,n,l,d)=>{var c;e.isBlock&&n>r&&(s+=i);let u=null==a?void 0:a[e.type.name];if(u)return l&&(s+=u({node:e,pos:n,parent:l,index:d,range:t})),!1;e.isText&&(s+=null==(c=null==e?void 0:e.text)?void 0:c.slice(Math.max(r,n)-n,o-n))}),s}(r,{from:a,to:s},{...void 0!==this.options.blockSeparator?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),tx=tk.create({name:"commands",addCommands:()=>({...f})}),tw=tk.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,o,i;let a=()=>{var n,o,i,a;if(null!=(a=null==(i=null==(o=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:o.filterTransaction)?void 0:i.call(o,e))?a:e.getMeta("y-sync$"))return;let s=ev(e.before,[e,...t]);ez(s).forEach(t=>{s.mapping.mapResult(t.oldRange.from).deletedAfter&&s.mapping.mapResult(t.oldRange.to).deletedBefore&&s.before.nodesBetween(t.oldRange.from,t.oldRange.to,(n,r)=>{let o=r+n.nodeSize-2,i=t.oldRange.from<=r&&o<=t.oldRange.to;this.editor.emit("delete",{type:"node",node:n,from:r,to:o,newFrom:s.mapping.map(r),newTo:s.mapping.map(o),deletedRange:t.oldRange,newRange:t.newRange,partial:!i,editor:this.editor,transaction:e,combinedTransform:s})})});let l=s.mapping;s.steps.forEach((t,n)=>{var o,i;if(t instanceof r.xu){let r=l.slice(n).map(t.from,-1),a=l.slice(n).map(t.to),d=l.invert().map(r,-1),c=l.invert().map(a),u=null==(o=s.doc.nodeAt(r-1))?void 0:o.marks.some(e=>e.eq(t.mark)),p=null==(i=s.doc.nodeAt(a))?void 0:i.marks.some(e=>e.eq(t.mark));this.editor.emit("delete",{type:"mark",mark:t.mark,from:t.from,to:t.to,deletedRange:{from:d,to:c},newRange:{from:r,to:a},partial:!!(p||u),editor:this.editor,transaction:e,combinedTransform:s})}})};null==(i=null==(o=null==(n=this.editor.options.coreExtensionOptions)?void 0:n.delete)?void 0:o.async)||i?setTimeout(a,0):a()}}),tM=tk.create({name:"drop",addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),tE=tk.create({name:"editable",addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("editable"),props:{editable:()=>this.editor.options.editable}})]}}),tS=new i.H$("focusEvents"),t$=tk.create({name:"focusEvents",addProseMirrorPlugins(){let{editor:e}=this;return[new i.Sy({key:tS,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;let r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;let r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),tO=tk.create({name:"keymap",addKeyboardShortcuts(){let e=()=>this.editor.commands.first(({commands:e})=>[()=>e.undoInputRule(),()=>e.command(({tr:t})=>{let{selection:n,doc:r}=t,{empty:o,$anchor:a}=n,{pos:s,parent:l}=a,d=a.parent.isTextblock&&s>0?t.doc.resolve(s-1):a,c=d.parent.type.spec.isolating,u=a.pos-a.parentOffset,p=c&&1===d.parent.childCount?u===a.pos:i.Y1.atStart(r).from===s;return!!o&&!!l.type.isTextblock&&!l.textContent.length&&!!p&&(!p||"paragraph"!==a.parent.type.name)&&e.clearNodes()}),()=>e.deleteSelection(),()=>e.joinBackward(),()=>e.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:e})=>[()=>e.deleteSelection(),()=>e.deleteCurrentNode(),()=>e.joinForward(),()=>e.selectNodeForward()]),n={Enter:()=>this.editor.commands.first(({commands:e})=>[()=>e.newlineInCode(),()=>e.createParagraphNear(),()=>e.liftEmptyBlock(),()=>e.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},r={...n},o={...n,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return D()||et()?o:r},addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(e=>e.getMeta("composition")))return;let r=e.some(e=>e.docChanged)&&!t.doc.eq(n.doc),o=e.some(e=>e.getMeta("preventClearDocument"));if(!r||o)return;let{empty:a,from:s,to:l}=t.selection,d=i.Y1.atStart(t.doc).from,c=i.Y1.atEnd(t.doc).to;if(a||!(s===d&&l===c)||!eq(n.doc))return;let f=n.tr,m=u({state:n,transaction:f}),{commands:h}=new p({editor:this.editor,state:m});if(h.clearNodes(),f.steps.length)return f}})]}}),tT=tk.create({name:"paste",addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),tA=tk.create({name:"tabindex",addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),tC=tk.create({name:"textDirection",addOptions:()=>({direction:void 0}),addGlobalAttributes(){if(!this.options.direction)return[];let{nodeExtensions:e}=eO(this.extensions);return[{types:e.filter(e=>"text"!==e.name).map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{let t=e.getAttribute("dir");return t&&("ltr"===t||"rtl"===t||"auto"===t)?t:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new i.Sy({key:new i.H$("textDirection"),props:{attributes:()=>{let e=this.options.direction;return e?{dir:e}:{}}}})]}});function tj(e){return new tl({find:e.find,handler:({state:t,range:n,match:r})=>{let o=e$(e.getAttributes,void 0,r);if(!1===o||null===o)return null;let{tr:i}=t,a=r[r.length-1],s=r[0];if(a){let r=s.search(/\S/),l=n.from+s.indexOf(a),d=l+a.length;if(eD(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>l).length)return null;d<n.to&&i.delete(d,n.to),l>n.from&&i.delete(n.from+r,l);let c=n.from+r+a.length;i.addMark(n.from+r,c,e.type.create(o||{})),i.removeStoredMark(e.type)}},undoable:e.undoable})}function tI(e){return new tl({find:e.find,handler:({state:t,range:n,match:r})=>{let o=e$(e.getAttributes,void 0,r)||{},{tr:i}=t,a=n.from,s=n.to,l=e.type.create(o);if(r[1]){let e=a+r[0].lastIndexOf(r[1]);e>s?e=s:s=e+r[1].length;let t=r[0][r[0].length-1];i.insertText(t,a+r[0].length-1),i.replaceWith(e,s,l)}else if(r[0]){let t=e.type.isInline?a:a-1;i.insert(t,e.type.create(o)).delete(i.mapping.map(a),i.mapping.map(s))}i.scrollIntoView()},undoable:e.undoable})}function tR(e){return new tl({find:e.find,handler:({state:t,range:n,match:r})=>{let o=t.doc.resolve(n.from),i=e$(e.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,i)},undoable:e.undoable})}function tB(e){return new tl({find:e.find,handler:({state:t,range:n,match:o,chain:i})=>{let a=e$(e.getAttributes,void 0,o)||{},s=t.tr.delete(n.from,n.to),l=s.doc.resolve(n.from).blockRange(),d=l&&(0,r.nd)(l,e.type,a);if(!d)return null;if(s.wrap(l,d),e.keepMarks&&e.editor){let{selection:n,storedMarks:r}=t,{splittableMarks:o}=e.editor.extensionManager,i=r||n.$to.parentOffset&&n.$from.marks();if(i){let e=i.filter(e=>o.includes(e.type.name));s.ensureMarks(e)}}if(e.keepAttributes){let t="bulletList"===e.type.name||"orderedList"===e.type.name?"listItem":"taskList";i().updateAttributes(t,a).run()}let c=s.doc.resolve(n.from-1).nodeBefore;c&&c.type===e.type&&(0,r.Mn)(s.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(o,c))&&s.join(n.from-1)},undoable:e.undoable})}function tN(e,t){let{selection:n}=e,{$from:r}=n;if(n instanceof i.qv){let e=r.index();return r.parent.canReplaceWith(e,e+1,t)}let o=r.depth;for(;o>=0;){let e=r.index(o);if(r.node(o).contentMatchAt(e).matchType(t))return!0;o-=1}return!1}function tP(e){if(!(null==e?void 0:e.trim()))return{};let t={},n=[],r=e.replace(/["']([^"']*)["']/g,e=>(n.push(e),`__QUOTED_${n.length-1}__`)),o=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(o){let e=o.map(e=>e.trim().slice(1));t.class=e.join(" ")}let i=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);i&&(t.id=i[1]),Array.from(r.matchAll(/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g)).forEach(([,e,r])=>{var o;let i=n[parseInt((null==(o=r.match(/__QUOTED_(\d+)__/))?void 0:o[1])||"0",10)];i&&(t[e]=i.slice(1,-1))});let a=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return a&&a.split(/\s+/).filter(Boolean).forEach(e=>{e.match(/^[a-zA-Z][\w-]*$/)&&(t[e]=!0)}),t}function tz(e){if(!e||0===Object.keys(e).length)return"";let t=[];return e.class&&String(e.class).split(/\s+/).filter(Boolean).forEach(e=>t.push(`.${e}`)),e.id&&t.push(`#${e.id}`),Object.entries(e).forEach(([e,n])=>{"class"!==e&&"id"!==e&&(!0===n?t.push(e):!1!==n&&null!=n&&t.push(`${e}="${String(n)}"`))}),t.join(" ")}function tD(e){let{nodeName:t,name:n,parseAttributes:r=tP,serializeAttributes:o=tz,defaultAttributes:i={},requiredAttributes:a=[],allowedAttributes:s}=e,l=n||t,d=e=>{if(!s)return e;let t={};return s.forEach(n=>{n in e&&(t[n]=e[n])}),t};return{parseMarkdown:(e,n)=>{let r={...i,...e.attributes};return n.createNode(t,r,[])},markdownTokenizer:{name:t,level:"block",start(e){var t;let n=RegExp(`^:::${l}(?:\\s|$)`,"m"),r=null==(t=e.match(n))?void 0:t.index;return void 0!==r?r:-1},tokenize(e,n,o){let i=RegExp(`^:::${l}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),s=e.match(i);if(!s)return;let d=r(s[1]||"");if(!a.find(e=>!(e in d)))return{type:t,raw:s[0],attributes:d}}},renderMarkdown:e=>{let t=o(d(e.attrs||{})),n=t?` {${t}}`:"";return`:::${l}${n} :::`}}}function t_(e){let{nodeName:t,name:n,getContent:r,parseAttributes:o=tP,serializeAttributes:i=tz,defaultAttributes:a={},content:s="block",allowedAttributes:l}=e,d=n||t,c=e=>{if(!l)return e;let t={};return l.forEach(n=>{n in e&&(t[n]=e[n])}),t};return{parseMarkdown:(e,n)=>{let o;if(r){let t=r(e);o="string"==typeof t?[{type:"text",text:t}]:t}else o="block"===s?n.parseChildren(e.tokens||[]):n.parseInline(e.tokens||[]);let i={...a,...e.attributes};return n.createNode(t,i,o)},markdownTokenizer:{name:t,level:"block",start(e){var t;let n=RegExp(`^:::${d}`,"m"),r=null==(t=e.match(n))?void 0:t.index;return void 0!==r?r:-1},tokenize(e,n,r){var i;let a=RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),l=e.match(a);if(!l)return;let[c,u=""]=l,p=o(u),f=1,m=c.length,h="",g=/^:::([\w-]*)(\s.*)?/gm,y=e.slice(m);for(g.lastIndex=0;;){let n=g.exec(y);if(null===n)break;let o=n.index,a=n[1];if(null==(i=n[2])||!i.endsWith(":::")){if(a)f+=1;else if(0==(f-=1)){let i=y.slice(0,o);h=i.trim();let a=e.slice(0,m+o+n[0].length),l=[];if(h){if("block"===s)for((l=r.blockTokens(i)).forEach(e=>{e.text&&(!e.tokens||0===e.tokens.length)&&(e.tokens=r.inlineTokens(e.text))});l.length>0;){let e=l[l.length-1];if("paragraph"!==e.type||e.text&&""!==e.text.trim())break;l.pop()}else l=r.inlineTokens(h)}return{type:t,raw:a,attributes:p,content:h,tokens:l}}}}}},renderMarkdown:(e,t)=>{let n=i(c(e.attrs||{})),r=n?` {${n}}`:"",o=t.renderChildren(e.content||[],"\n\n");return`:::${d}${r}

${o}

:::`}}}function tH(e){if(!e.trim())return{};let t={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g,r=n.exec(e);for(;null!==r;){let[,o,i,a]=r;t[o]=i||a,r=n.exec(e)}return t}function tL(e){return Object.entries(e).filter(([,e])=>null!=e).map(([e,t])=>`${e}="${t}"`).join(" ")}function tF(e){let{nodeName:t,name:n,getContent:r,parseAttributes:o=tH,serializeAttributes:i=tL,defaultAttributes:a={},selfClosing:s=!1,allowedAttributes:l}=e,d=n||t,c=e=>{if(!l)return e;let t={};return l.forEach(n=>{let r="string"==typeof n?n:n.name,o="string"==typeof n?void 0:n.skipIfDefault;if(r in e){let n=e[r];if(void 0!==o&&n===o)return;t[r]=n}}),t},u=d.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(e,n)=>{let o={...a,...e.attributes};if(s)return n.createNode(t,o);let i=r?r(e):e.content||"";return i?n.createNode(t,o,[n.createTextNode(i)]):n.createNode(t,o,[])},markdownTokenizer:{name:t,level:"inline",start(e){let t=s?RegExp(`\\[${u}\\s*[^\\]]*\\]`):RegExp(`\\[${u}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${u}\\]`),n=e.match(t),r=null==n?void 0:n.index;return void 0!==r?r:-1},tokenize(e,n,r){let i=s?RegExp(`^\\[${u}\\s*([^\\]]*)\\]`):RegExp(`^\\[${u}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${u}\\]`),a=e.match(i);if(!a)return;let l="",d="";if(s){let[,e]=a;d=e}else{let[,e,t]=a;d=e,l=t||""}let c=o(d.trim());return{type:t,raw:a[0],content:l.trim(),attributes:c}}},renderMarkdown:e=>{let t="";r?t=r(e):e.content&&e.content.length>0&&(t=e.content.filter(e=>"text"===e.type).map(e=>e.text).join(""));let n=i(c(e.attrs||{})),o=n?` ${n}`:"";return s?`[${d}${o}]`:`[${d}${o}]${t}[/${d}]`}}}function tV(e,t,n){var r,o,i,a;let s=e.split("\n"),l=[],d="",c=0,u=t.baseIndentSize||2;for(;c<s.length;){let e;let p=s[c],f=p.match(t.itemPattern);if(!f){if(l.length>0)break;if(""!==p.trim())return;c+=1,d=`${d}${p}
`;continue}let m=t.extractItemData(f),{indentLevel:h,mainContent:g}=m;d=`${d}${p}
`;let y=[g];for(c+=1;c<s.length;){let e=s[c];if(""===e.trim()){let t=s.slice(c+1).findIndex(e=>""!==e.trim());if(-1===t)break;if(((null==(o=null==(r=s[c+1+t].match(/^(\s*)/))?void 0:r[1])?void 0:o.length)||0)>h){y.push(e),d=`${d}${e}
`,c+=1;continue}break}if(((null==(a=null==(i=e.match(/^(\s*)/))?void 0:i[1])?void 0:a.length)||0)>h)y.push(e),d=`${d}${e}
`,c+=1;else break}let b=y.slice(1);if(b.length>0){let r=b.map(e=>e.slice(h+u)).join("\n");r.trim()&&(e=t.customNestedParser?t.customNestedParser(r):n.blockTokens(r))}let k=t.createToken(m,e);l.push(k)}if(0!==l.length)return{items:l,raw:d}}function tW(e,t,n,r){if(!e||!Array.isArray(e.content))return"";let o="function"==typeof n?n(r):n,[i,...a]=e.content,s=t.renderChildren([i]),l=[`${o}${s}`];return a&&a.length>0&&a.forEach(e=>{let n=t.renderChildren([e]);if(n){let e=n.split("\n").map(e=>e?t.indent(e):"").join("\n");l.push(e)}}),l.join("\n")}c({},{createAtomBlockMarkdownSpec:()=>tD,createBlockMarkdownSpec:()=>t_,createInlineMarkdownSpec:()=>tF,parseAttributes:()=>tP,parseIndentedBlocks:()=>tV,renderNestedMarkdownContent:()=>tW,serializeAttributes:()=>tz});var tY=class e extends tp{constructor(){super(...arguments),this.type="node"}static create(t={}){return new e("function"==typeof t?t():t)}configure(e){return super.configure(e)}extend(e){let t="function"==typeof e?e():e;return super.extend(t)}};function tK(e){return new tm({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:o})=>{let i=e$(e.getAttributes,void 0,r,o);if(!1===i||null===i)return null;let{tr:a}=t,s=r[r.length-1],l=r[0],d=n.to;if(s){let r=l.search(/\S/),o=n.from+l.indexOf(s),c=o+s.length;if(eD(n.from,n.to,t.doc).filter(t=>t.mark.type.excluded.find(n=>n===e.type&&n!==t.mark.type)).filter(e=>e.to>o).length)return null;c<n.to&&a.delete(c,n.to),o>n.from&&a.delete(n.from+r,o),d=n.from+r+s.length,a.addMark(n.from+r,d,e.type.create(i||{})),a.removeStoredMark(e.type)}}})}}}]);