(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6341],{63587:function(e,s,a){Promise.resolve().then(a.bind(a,19825))},83149:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},26490:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},37451:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]])},65561:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]])},53229:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]])},62457:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},70699:function(e,s,a){"use strict";a.d(s,{Z:function(){return t}});/**
 * @license lucide-react v0.358.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let t=(0,a(70843).Z)("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]])},19825:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return g}});var t=a(57437),i=a(2265),n=a(79580),l=a(65561),o=a(83149),r=a(53229),c=a(62457),d=a(26490),m=a(70699),u=a(37451),h=a(28402);let x=["Free WiFi","Swimming Pool","Gym","Spa","Restaurant","Bar","Room Service","Parking","Airport Shuttle","Beach Access","Conference Hall","Pet Friendly"];function g(){let[e,s]=(0,i.useState)("general"),[a,g]=(0,i.useState)({subdomain:"",customDomain:"",verified:!1,ssl:!1}),[p,b]=(0,i.useState)(!1),[f,y]=(0,i.useState)(null),[v,j]=(0,i.useState)(!0),[N,w]=(0,i.useState)(!1),[k,C]=(0,i.useState)([]),[Z,S]=(0,i.useState)({name:"",description:"",category:"",email:"",phone:"",address:"",checkInTime:"14:00",checkOutTime:"12:00",coverImage:"",amenities:[]});(0,i.useEffect)(()=>{fetch("/api/hotels").then(e=>e.json()).then(e=>{if(e.success&&e.hotels.length>0){var s,a,t,i,n,l;let o=e.hotels[0];y(o),S({name:o.name,description:o.description||"",category:o.category||"",email:(null===(s=o.contact)||void 0===s?void 0:s.email)||"",phone:(null===(a=o.contact)||void 0===a?void 0:a.phone)||"",address:(null===(i=o.contact)||void 0===i?void 0:null===(t=i.address)||void 0===t?void 0:t.line1)||"",checkInTime:(null===(n=o.policies)||void 0===n?void 0:n.checkInTime)||"14:00",checkOutTime:(null===(l=o.policies)||void 0===l?void 0:l.checkOutTime)||"12:00",coverImage:o.coverImage||"",amenities:o.amenities||[]})}j(!1)}).catch(console.error),fetch("/api/vendor/domain").then(e=>e.json()).then(e=>{e.success&&e.domain&&g({subdomain:e.domain.subdomain||"",customDomain:e.domain.customDomain||"",verified:e.domain.customDomainVerified||!1,ssl:e.domain.sslEnabled||!1})}).catch(console.error),fetch("/api/config/public").then(e=>e.json()).then(e=>{var s,a;e.success&&(null===(a=e.config)||void 0===a?void 0:null===(s=a.categories)||void 0===s?void 0:s.items)&&C(e.config.categories.items)}).catch(console.error)},[]);let T=async()=>{if(f){w(!0);try{let e=await fetch("/api/hotels/".concat(f._id),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:Z.name,description:Z.description,category:Z.category,contact:{email:Z.email,phone:Z.phone,address:{line1:Z.address}},policies:{checkInTime:Z.checkInTime,checkOutTime:Z.checkOutTime},coverImage:Z.coverImage,amenities:Z.amenities})}),s=await e.json();s.success?(alert("Settings saved successfully!"),y(s.hotel)):alert("Failed: "+s.error)}catch(e){alert("Error saving settings")}finally{w(!1)}}},D=async()=>{w(!0);try{let e=await fetch("/api/vendor/domain",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subdomain:a.subdomain,customDomain:a.customDomain})}),s=await e.json();s.success?(alert("Domain settings updated! Custom domains require admin approval."),g({subdomain:s.domain.subdomain||"",customDomain:s.domain.customDomain||"",verified:s.domain.customDomainVerified||!1,ssl:s.domain.sslEnabled||!1})):alert("Failed: "+s.error)}catch(e){console.error(e),alert("Error saving domain settings")}finally{w(!1)}},I=e=>{S(s=>({...s,amenities:s.amenities.includes(e)?s.amenities.filter(s=>s!==e):[...s.amenities,e]}))};return v?(0,t.jsx)("div",{className:"p-8",children:(0,t.jsx)(n.Z,{className:"animate-spin"})}):f?(0,t.jsxs)("div",{className:"max-w-4xl mx-auto space-y-8 pb-20",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Hotel Settings"}),(0,t.jsxs)("div",{className:"flex bg-gray-100 p-1 rounded-lg",children:[(0,t.jsx)("button",{onClick:()=>s("general"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("general"===e?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"),children:"General"}),(0,t.jsx)("button",{onClick:()=>s("domain"),className:"px-4 py-2 rounded-md text-sm font-medium transition-all ".concat("domain"===e?"bg-white shadow text-blue-600":"text-gray-500 hover:text-gray-700"),children:"Domain Configuration"})]})]}),"general"===e?(0,t.jsxs)("div",{className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b pb-4",children:[(0,t.jsx)(l.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Cover Image"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-sm text-gray-500 mb-2",children:"This image will appear at the top of your hotel page."}),(0,t.jsx)(h.Z,{images:Z.coverImage?[Z.coverImage]:[],onChange:e=>S({...Z,coverImage:e[0]||""}),maxImages:1})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b pb-4",children:[(0,t.jsx)(o.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"General Information"})]}),(0,t.jsxs)("div",{className:"grid gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Hotel Name"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:Z.name,onChange:e=>S({...Z,name:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),(0,t.jsx)("textarea",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none h-24",value:Z.description,onChange:e=>S({...Z,description:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Property Category"}),(0,t.jsxs)("select",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none bg-white",value:Z.category,onChange:e=>S({...Z,category:e.target.value}),children:[(0,t.jsx)("option",{value:"",children:"Select a Category..."}),k.map(e=>(0,t.jsx)("option",{value:e.name,children:e.name},e.name))]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"This determines how your property is displayed on the marketplace."})]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b pb-4",children:[(0,t.jsx)(r.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Amenities"})]}),(0,t.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:x.map(e=>(0,t.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer bg-gray-50 p-3 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,t.jsx)("input",{type:"checkbox",checked:Z.amenities.includes(e),onChange:()=>I(e),className:"h-4 w-4 text-blue-600 rounded"}),(0,t.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e})]},e))})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b pb-4",children:[(0,t.jsx)(c.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Contact Details"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:Z.email,onChange:e=>S({...Z,email:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:Z.phone,onChange:e=>S({...Z,phone:e.target.value})})]}),(0,t.jsxs)("div",{className:"md:col-span-2",children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,t.jsx)("input",{className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:Z.address,onChange:e=>S({...Z,address:e.target.value})})]})]})]}),(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b pb-4",children:[(0,t.jsx)(d.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Policies"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-in Time"}),(0,t.jsx)("input",{type:"time",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:Z.checkInTime,onChange:e=>S({...Z,checkInTime:e.target.value})})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Check-out Time"}),(0,t.jsx)("input",{type:"time",className:"w-full p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:Z.checkOutTime,onChange:e=>S({...Z,checkOutTime:e.target.value})})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end sticky bottom-6 z-10",children:(0,t.jsxs)("button",{onClick:T,disabled:N,className:"flex items-center gap-2 bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 shadow-lg disabled:opacity-70 transition-all border-2 border-white/20",children:[N?(0,t.jsx)(n.Z,{className:"animate-spin h-5 w-5"}):(0,t.jsx)(m.Z,{className:"h-5 w-5"}),"Save Changes"]})})]}):(0,t.jsx)("div",{className:"space-y-8",children:(0,t.jsxs)("div",{className:"bg-white p-6 rounded-xl border shadow-sm space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 border-b pb-4",children:[(0,t.jsx)(u.Z,{className:"h-5 w-5 text-gray-500"}),(0,t.jsx)("h2",{className:"text-lg font-semibold",children:"Domain Setup"})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Subdomain"}),(0,t.jsxs)("div",{className:"flex items-center",children:[(0,t.jsx)("input",{className:"flex-1 p-2 border rounded-l-lg focus:ring-2 focus:ring-blue-500 outline-none",value:a.subdomain,onChange:e=>g({...a,subdomain:e.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"")}),placeholder:"my-hotel"}),(0,t.jsx)("span",{className:"bg-gray-100 border border-l-0 px-4 py-2 rounded-r-lg text-gray-500",children:".hotelify.com"})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["Your public URL: ",(0,t.jsxs)("strong",{className:"text-blue-600",children:[a.subdomain||"...",".hotelify.com"]})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Custom Domain (Optional)"}),(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,t.jsx)("input",{className:"flex-1 p-2 border rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:a.customDomain,onChange:e=>g({...a,customDomain:e.target.value}),placeholder:"www.myhotel.com"}),a.customDomain&&(0,t.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-bold uppercase ".concat(a.verified?"bg-green-100 text-green-600":"bg-yellow-100 text-yellow-600"),children:a.verified?"Verified":"Pending"})]}),(0,t.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg text-sm text-blue-800",children:[(0,t.jsx)("p",{className:"font-bold mb-1",children:"DNS Configuration:"}),(0,t.jsxs)("p",{children:["To connect your custom domain, create a ",(0,t.jsx)("strong",{children:"CNAME"})," record pointing to ",(0,t.jsx)("strong",{children:"cname.hotelify.com"})]})]})]}),(0,t.jsx)("div",{className:"flex justify-end pt-4",children:(0,t.jsxs)("button",{onClick:D,disabled:N,className:"flex items-center gap-2 bg-blue-600 text-white px-8 py-3 rounded-xl font-bold hover:bg-blue-700 shadow-lg disabled:opacity-70 transition-all",children:[N?(0,t.jsx)(n.Z,{className:"animate-spin h-5 w-5"}):(0,t.jsx)(m.Z,{className:"h-5 w-5"}),"Update Domain Settings"]})})]})})]}):(0,t.jsx)("div",{className:"p-8",children:"No hotel found. Please contact support."})}},28402:function(e,s,a){"use strict";a.d(s,{Z:function(){return c}});var t=a(57437),i=a(2265),n=a(52235),l=a(79580),o=a(10632),r=a(20703);function c(e){let{images:s=[],onChange:a,maxImages:c=5}=e,[d,m]=(0,i.useState)(!1),u=(0,i.useRef)(null),h=async e=>{var t;let i=null===(t=e.target.files)||void 0===t?void 0:t[0];if(i){if(s.length>=c){alert("Maximum ".concat(c," images allowed."));return}m(!0);try{let e=await g(i),t=new FormData;t.append("file",e);let n=await fetch("/api/upload",{method:"POST",body:t}),l=await n.json();l.success?a([...s,l.url]):alert("Upload failed: "+l.error)}catch(e){console.error(e),alert("Upload error")}finally{m(!1),u.current&&(u.current.value="")}}},x=async(e,t)=>{confirm("Delete this image?")&&(a(s.filter((e,s)=>s!==t)),await fetch("/api/upload",{method:"DELETE",headers:{"Content-Type":"application/json"},body:JSON.stringify({url:e})}))},g=e=>new Promise((s,a)=>{let t=new FileReader;t.readAsDataURL(e),t.onload=t=>{var i;let n=document.createElement("img");n.src=null===(i=t.target)||void 0===i?void 0:i.result,n.onload=()=>{let t=document.createElement("canvas"),i=1920/n.width,l=i<1?1920:n.width,o=i<1?n.height*i:n.height;t.width=l,t.height=o;let r=t.getContext("2d");null==r||r.drawImage(n,0,0,l,o),t.toBlob(e=>{e?s(e):a(Error("Canvas to Blob failed"))},e.type,.8)}},t.onerror=a});return(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsxs)("div",{className:"flex flex-wrap gap-4",children:[s.map((e,s)=>(0,t.jsxs)("div",{className:"relative w-32 h-32 rounded-xl overflow-hidden border border-gray-200 group",children:[(0,t.jsx)(r.default,{src:e,alt:"Room ".concat(s+1),fill:!0,className:"object-cover"}),(0,t.jsx)("button",{type:"button",onClick:()=>x(e,s),className:"absolute top-1 right-1 bg-red-600 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,t.jsx)(n.Z,{className:"h-3 w-3"})})]},s)),s.length<c&&(0,t.jsxs)("div",{onClick:()=>{var e;return null===(e=u.current)||void 0===e?void 0:e.click()},className:"w-32 h-32 rounded-xl border-2 border-dashed border-gray-300 flex flex-col items-center justify-center cursor-pointer hover:bg-gray-50 hover:border-blue-400 transition-colors text-gray-400 hover:text-blue-500",children:[d?(0,t.jsx)(l.Z,{className:"h-6 w-6 animate-spin"}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(o.Z,{className:"h-6 w-6 mb-1"}),(0,t.jsx)("span",{className:"text-xs font-bold",children:"Upload"})]}),(0,t.jsx)("input",{ref:u,type:"file",accept:"image/*",className:"hidden",onChange:h})]})]}),(0,t.jsxs)("p",{className:"text-xs text-gray-400",children:[s.length," / ",c," images. Optimized automatically."]})]})}}},function(e){e.O(0,[7672,2971,8069,1744],function(){return e(e.s=63587)}),_N_E=e.O()}]);